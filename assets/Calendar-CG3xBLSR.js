import{j as t,a as V,b as k,c as ie}from"./index-CUFJH7S0.js";import{b as p}from"./vendor-DPLMwiL-.js";const G=({value:x,onChange:v,label:N})=>{const[d,C]=p.useState("hour"),y=p.useRef(null),S=o=>{if(!o)return{hours:12,minutes:0};const[m,u]=o.split(":").map(Number);return{hours:m||12,minutes:u||0}},{hours:h,minutes:j}=S(x),$=h>12?h-12:h===0?12:h,A=$%12*30+j*.5-90,T=j*6-90,E=o=>{if(!y.current)return;const m=y.current.getBoundingClientRect(),u=m.left+m.width/2,M=m.top+m.height/2,a=o.clientX||o.touches&&o.touches[0]?.clientX,g=o.clientY||o.touches&&o.touches[0]?.clientY;if(!a||!g)return;const D=(Math.atan2(g-M,a-u)*180/Math.PI+90+360)%360;if(d==="hour"){const I=Math.round(D/30)%12,w=I===0?12:I,W=h>=12?w===12?12:w+12:w;v(`${W.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`),C("minute")}else if(d==="minute"){const I=Math.round(D/6)%60;v(`${h.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`)}},F=[];for(let o=1;o<=12;o++){const m=(o*30-90)*Math.PI/180,u=50+35*Math.cos(m),M=50+35*Math.sin(m),a=50+40*Math.cos(m),g=50+40*Math.sin(m),L=50+32*Math.cos(m),D=50+32*Math.sin(m);F.push(t.jsxs("g",{children:[t.jsx("line",{x1:u,y1:M,x2:a,y2:g,stroke:"#333",strokeWidth:"2"}),t.jsx("text",{x:L,y:D,textAnchor:"middle",dominantBaseline:"central",fontSize:"12",fill:"#333",children:o})]},o))}const b=[];for(let o=0;o<60;o+=5)if(o%15!==0){const m=(o*6-90)*Math.PI/180,u=50+37*Math.cos(m),M=50+37*Math.sin(m),a=50+40*Math.cos(m),g=50+40*Math.sin(m);b.push(t.jsx("line",{x1:u,y1:M,x2:a,y2:g,stroke:"#666",strokeWidth:"1"},o))}return t.jsxs("div",{style:{margin:"1rem 0"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:N}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("div",{style:{position:"relative"},children:t.jsxs("svg",{ref:y,width:"200",height:"200",viewBox:"0 0 100 100",onClick:E,style:{border:`3px solid ${d==="hour"?"#22314a":"#dc3545"}`,borderRadius:"50%",background:d==="hour"?"#f8f9ff":"#fff8f8",cursor:"pointer",userSelect:"none"},children:[t.jsxs("defs",{children:[t.jsx("marker",{id:"hour-arrow",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"3",markerHeight:"3",orient:"auto-start-reverse",children:t.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:d==="hour"?"#22314a":"#aaa"})}),t.jsx("marker",{id:"minute-arrow",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"4",markerHeight:"4",orient:"auto-start-reverse",children:t.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:d==="minute"?"#dc3545":"#aaa"})})]}),t.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"white",stroke:"#22314a",strokeWidth:"1"}),F,b,t.jsx("line",{x1:"50",y1:"50",x2:50+27*Math.cos(A*Math.PI/180),y2:50+27*Math.sin(A*Math.PI/180),stroke:d==="hour"?"#22314a":"#aaa",strokeWidth:d==="hour"?"3":"1",markerEnd:"url(#hour-arrow)",pointerEvents:"none"}),t.jsx("line",{x1:"50",y1:"50",x2:50+35*Math.cos(T*Math.PI/180),y2:50+35*Math.sin(T*Math.PI/180),stroke:d==="minute"?"#dc3545":"#aaa",strokeWidth:d==="minute"?"3":"1",markerEnd:"url(#minute-arrow)",pointerEvents:"none"}),t.jsx("circle",{cx:"50",cy:"50",r:"3",fill:"#22314a",pointerEvents:"none"})]})}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("div",{style:{background:"#f8f9fa",border:"2px solid #22314a",borderRadius:"8px",padding:"1rem",textAlign:"center",minWidth:"120px"},children:[t.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#22314a",fontFamily:"monospace"},children:[$.toString().padStart(2,"0"),":",j.toString().padStart(2,"0")]}),t.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"0.25rem"},children:h>=12?"PM":"AM"})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>{const o=h>=12?h-12:h;v(`${o.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`)},style:{padding:"0.5rem 1rem",border:"2px solid #22314a",borderRadius:"4px",background:h<12?"#22314a":"white",color:h<12?"white":"#22314a",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"AM"}),t.jsx("button",{type:"button",onClick:()=>{const o=h<12?h+12:h;v(`${o.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`)},style:{padding:"0.5rem 1rem",border:"2px solid #22314a",borderRadius:"4px",background:h>=12?"#22314a":"white",color:h>=12?"white":"#22314a",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"PM"})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsx("button",{type:"button",onClick:()=>C("hour"),style:{padding:"0.5rem 1rem",border:"2px solid #22314a",borderRadius:"4px",background:d==="hour"?"#22314a":"white",color:d==="hour"?"white":"#22314a",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"Hours"}),t.jsx("button",{type:"button",onClick:()=>C("minute"),style:{padding:"0.5rem 1rem",border:"2px solid #dc3545",borderRadius:"4px",background:d==="minute"?"#dc3545":"white",color:d==="minute"?"white":"#dc3545",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"Minutes"})]}),t.jsxs("div",{style:{fontSize:"12px",color:"#666",maxWidth:"150px",lineHeight:"1.4",textAlign:"center"},children:[t.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:"bold",color:d==="hour"?"#22314a":"#dc3545"},children:d==="hour"?"Setting Hours":"Setting Minutes"}),t.jsxs("div",{children:["Click anywhere on the clock face to set the ",d==="hour"?"hour":"minute"]})]})]})]})]})};function le({label:x="Address/Location",value:v,onChange:N,placeholder:d="Start typing an addressâ€¦",required:C=!1,showTip:y=!0}){const S=p.useRef(null);p.useRef(null);const[h,j]=p.useState(!1);return p.useEffect(()=>()=>{},[void 0,N]),t.jsxs("div",{children:[x&&t.jsx("label",{style:{display:"block",fontWeight:600,color:"#22314a",margin:"0.25rem 0"},children:x}),t.jsx("input",{ref:S,type:"text",value:v||"",onChange:A=>N(A.target.value),placeholder:d,className:"calendar-input",required:C,"aria-invalid":C&&!v?"true":"false"}),y&&t.jsx("div",{style:{color:"#6c757d",fontSize:"0.85rem",marginTop:"0.25rem"},children:"Tip: Add VITE_GOOGLE_MAPS_API_KEY to enable Australian address autocomplete."})]})}const ce=({open:x,title:v,message:N,onConfirm:d,onCancel:C})=>x?t.jsx("div",{className:"custom-modal-overlay",children:t.jsxs("div",{className:"custom-modal",children:[t.jsx("h3",{className:"custom-modal-title",children:v}),t.jsx("div",{className:"custom-modal-message",children:N}),t.jsxs("div",{className:"custom-modal-actions",children:[t.jsx("button",{className:"custom-modal-btn confirm",onClick:d,children:"Yes, Delete"}),t.jsx("button",{className:"custom-modal-btn cancel",onClick:C,children:"Cancel"})]})]})}):null,_={"Personal Calendar":{color:"#F8C8DC",textColor:"#22314a"},"Business Calendar":{color:"#CDEAC0",textColor:"#22314a"},"Kids Sports & Events":{color:"#FDE2A7",textColor:"#22314a"},"Personal Sports & Events":{color:"#FFCFD2",textColor:"#22314a"},"Centre Com Computers":{color:"#D7C0FD",textColor:"#22314a"},Commerical:{color:"#C7D2FE",textColor:"#22314a"},"Daniel Allison":{color:"#BDE0FE",textColor:"#22314a"},"Jaki Lew":{color:"#CAF0F8",textColor:"#22314a"},"Krongold Family":{color:"#B8E0D2",textColor:"#22314a"},"Krongold Group":{color:"#FFE5B4",textColor:"#22314a"},"Office & Administration":{color:"#E3F2C1",textColor:"#22314a"},"Peter & Alla Lew":{color:"#F9E2AF",textColor:"#22314a"},"Remote Programming":{color:"#E4C1F9",textColor:"#22314a"},Residential:{color:"#F1F0FF",textColor:"#22314a"},"Rosie Lew":{color:"#FFD6E0",textColor:"#22314a"},"Stevie Lew":{color:"#FFEDC2",textColor:"#22314a"},"Supply & Demand":{color:"#D0F4DE",textColor:"#22314a"},"Training & Research":{color:"#C9E4DE",textColor:"#22314a"},"Travel Time":{color:"#EAD7BB",textColor:"#22314a"},"Website & Marketing":{color:"#E0E0E0",textColor:"#22314a"},"Precision Home Education":{color:"#CFE1F2",textColor:"#22314a"}},z=x=>_[x]||{color:"#E0E0E0",textColor:"#000"},ue=()=>{const x="Australia/Sydney",[v,N]=p.useState(!1),[d,C]=p.useState(!0),[y,S]=p.useState("monthly"),[h,j]=p.useState([]),[$,A]=p.useState([]),[T,E]=p.useState(null),[F,b]=p.useState(!1),[o,m]=p.useState(null),[u,M]=p.useState(new Date),[a,g]=p.useState({title:"",date:"",time:"",endTime:"",client:"",customerId:"",description:"",category:"",address:"",addressMeta:null}),[L,D]=p.useState(""),[I,w]=p.useState(!1),W=$.filter(e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(L.toLowerCase()));p.useEffect(()=>{(()=>{const n=V.isAuthenticated();N(n),C(!1)})()},[]);const R=e=>{if(!e.appointmentDate)return e;const n=new Date(e.appointmentDate),i=new Intl.DateTimeFormat("en-CA",{timeZone:x,year:"numeric",month:"2-digit",day:"2-digit"}).format(n),c=new Intl.DateTimeFormat("en-AU",{timeZone:x,hour:"2-digit",minute:"2-digit",hour12:!1}).format(n);let r=c;if(e.durationMinutes){const s=new Date(n.getTime()+e.durationMinutes*6e4);r=new Intl.DateTimeFormat("en-AU",{timeZone:x,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}return{...e,time:c,endTime:r,date:i,appointmentDate:e.appointmentDate}};p.useEffect(()=>{v&&(async()=>{E(null);try{const n=await k.getAll(),c=(Array.isArray(n)?n:n.appointments||[]).map(R);j(c)}catch(n){console.error("Error loading appointments:",n),j([]);const i=n?.status===401?"Your session has expired. Please log in again to view appointments.":n?.message||"Failed to load appointments.";E({type:"error",message:i})}try{const n=await ie.getCalendarCustomers(),i=Array.isArray(n)?n:n.customers||[];A(i)}catch(n){console.error("Error loading customers:",n),A([]),n?.status===403?E({type:"error",message:"You are logged in without admin/staff permissions. Customer list is hidden. Appointments can still be created by typing a client name, but dropdown requires admin/staff."}):n?.status===401&&E({type:"error",message:"Your session has expired. Please log in again to load customers."})}})()},[v]);const J=async e=>{e.preventDefault(),console.log("Attempting to create appointment with data:",a);const n=U(a.time,a.endTime);if(isNaN(n)||n<15||n>480){alert("Duration must be between 15 and 480 minutes.");return}if(!a.customerId||isNaN(Number(a.customerId))||!Number.isInteger(Number(a.customerId))){alert("Please select a valid client from the dropdown.");return}const i=`${a.date}T${a.time}:00`,c=new Date(i),r={title:a.title,description:a.description||`Client: ${a.client}
Category: ${a.category}
Address: ${a.address}`,appointmentDate:c.toISOString(),durationMinutes:n,customerId:Number(a.customerId),address:a.address||"",addressPlaceId:a.addressMeta?.placeId||null,addressLat:a.addressMeta?.lat??null,addressLng:a.addressMeta?.lng??null,addressComponents:a.addressMeta?.components||null};console.log("Appointment payload:",r),Object.keys(r).forEach(s=>{console.log(`${s}:`,r[s],"type:",typeof r[s])});try{const s=await k.create(r);console.log("Appointment created successfully:",s),g({title:"",date:"",time:"",endTime:"",client:"",customerId:"",description:"",category:"",address:"",addressMeta:null}),b(!1);const l=await k.getAll(),P=(Array.isArray(l)?l:l.appointments||[]).map(R);j(P),alert("Appointment added successfully!")}catch(s){let l="Failed to add appointment. ";s.response&&s.response.data&&s.response.data.error?(typeof s.response.data.error=="string"?l+=s.response.data.error:s.response.data.error.message?l+=s.response.data.error.message:l+=JSON.stringify(s.response.data.error),s.response.data.error.details&&(l+=`
Details:`,s.response.data.error.details.forEach(f=>{l+=`
- ${f.path}: ${f.msg} (value: ${f.value})`}))):s.message&&(l+=s.message),alert(l)}},U=(e,n)=>{const[i,c]=e.split(":").map(Number),[r,s]=n.split(":").map(Number),l=i*60+c;return r*60+s-l},B=e=>{const n=Q(e);m(e.id),g(n),D(n.client||""),b(!0)},Z=async e=>{e.preventDefault();const n=`${a.date}T${a.time}:00`,i=new Date(n),c=U(a.time,a.endTime),r={title:a.title,description:a.description,appointmentDate:i.toISOString(),durationMinutes:c,customerId:Number(a.customerId),address:a.address||"",category:a.category||""};a.addressMeta&&(r.addressPlaceId=a.addressMeta.placeId||null,r.addressLat=a.addressMeta.lat??null,r.addressLng=a.addressMeta.lng??null,r.addressComponents=a.addressMeta.components||null);try{await k.update(o,r),g({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:"",addressMeta:null}),m(null),b(!1);const s=await k.getAll(),f=(Array.isArray(s)?s:s.appointments||[]).map(R);j(f)}catch(s){console.error("Error updating appointment:",s),alert("Failed to update appointment. Please try again.")}},[X,O]=p.useState({open:!1,id:null}),Q=e=>{const n=e.client||(e.customer?`${e.customer.firstName||""} ${e.customer.lastName||""}`.trim():"")||"";return{title:e.title||"",date:e.date||"",time:e.time||"",endTime:e.endTime||"",client:n,customerId:e.customerId||e.customer?.id||"",description:e.description||"",category:e.category||"",address:e.address||"",addressMeta:null,id:e.id,appointmentDate:e.appointmentDate}},ee=async e=>{O({open:!0,id:e})},te=async()=>{const e=X.id;O({open:!1,id:null});try{await k.delete(e);const n=await k.getAll(),c=(Array.isArray(n)?n:n.appointments||[]).map(R);j(c)}catch(n){console.error("Error deleting appointment:",n),alert("Failed to delete appointment. Please try again.")}},Y=e=>{const n=new Intl.DateTimeFormat("en-CA",{timeZone:x,year:"numeric",month:"2-digit",day:"2-digit"}).format(e);return h.filter(i=>i.date===n)},ne=()=>{const e=Number(new Intl.DateTimeFormat("en-US",{timeZone:x,year:"numeric"}).format(u)),n=Number(new Intl.DateTimeFormat("en-US",{timeZone:x,month:"numeric"}).format(u))-1,i=new Date(e,n,1),c=i.getDay();let r=new Date(i);r.setDate(r.getDate()-c);const s=[];for(let l=0;l<42;l++){const f=new Date(r);f.setDate(r.getDate()+l),s.push(f)}return s},ae=()=>{const e=u.getDay(),n=new Date(u);n.setDate(u.getDate()-e);const i=[];for(let c=0;c<7;c++){const r=new Date(n);r.setDate(n.getDate()+c),i.push(r)}return i},K=e=>{const n=new Date(u);switch(y){case"monthly":n.setMonth(u.getMonth()+e);break;case"weekly":n.setDate(u.getDate()+e*7);break;case"daily":n.setDate(u.getDate()+e);break}M(n)},H=()=>{const e=[];for(let n=0;n<24;n++)for(let i=0;i<60;i+=15){const c=`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`;e.push(c)}return e};return d?t.jsx("div",{className:"calendar-container",style:{minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("h2",{children:"Loading Calendar..."})}):v?t.jsxs("div",{className:"calendar-container",children:[t.jsxs("div",{className:"calendar-header",children:[t.jsx("h1",{className:"calendar-title",children:"Calendar Management"}),t.jsx("button",{className:"calendar-logout-btn",onClick:()=>{V.logout(),N(!1),window.location.href="/"},children:"Logout"})]}),T&&t.jsx("div",{className:`calendar-feedback ${T.type==="error"?"error":""}`,children:T.message}),t.jsx("div",{className:"calendar-dashboard",children:t.jsxs("div",{className:"calendar-card",children:[t.jsx("h3",{children:"Appointment Management"}),t.jsx("p",{children:"View and manage appointments, clients, and schedules."}),t.jsx("button",{className:"calendar-btn-main",onClick:()=>{b(!F),m(null),g({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:"",addressMeta:null})},children:F?"Cancel":"Add New Appointment"})]})}),F&&t.jsxs("div",{className:"calendar-section",children:[t.jsx("h2",{style:{color:"#22314a",marginBottom:"1.5rem"},children:o?"Edit Appointment":"Add New Appointment"}),t.jsxs("form",{className:"calendar-form",onSubmit:e=>{if(e.preventDefault(),!a.customerId){alert("Please select a valid client from the dropdown.");return}(o?Z:J)(e)},noValidate:!0,children:[t.jsx("input",{type:"text",placeholder:"Appointment Title",value:a.title,onChange:e=>g({...a,title:e.target.value}),required:!0,className:"calendar-input"}),t.jsxs("div",{className:"calendar-client-select",children:[t.jsx("input",{type:"text",placeholder:"Select Client",value:L||a.client,onChange:e=>{D(e.target.value),w(!0),g({...a,client:e.target.value})},onBlur:()=>{setTimeout(()=>w(!1),200)},onFocus:()=>w(!0),autoComplete:"off",required:!0,className:"calendar-input"}),I&&W.length>0&&t.jsx("div",{className:"calendar-client-dropdown",children:W.map(e=>t.jsxs("div",{className:"calendar-client-option",onClick:()=>{g({...a,client:`${e.firstName} ${e.lastName}`,customerId:e.id}),D(`${e.firstName} ${e.lastName}`),w(!1)},children:[e.firstName," ",e.lastName," ",e.company?`(${e.company})`:""]},e.id))})]}),t.jsx("input",{type:"date",value:a.date,onChange:e=>g({...a,date:e.target.value}),required:!0,className:"calendar-input"}),t.jsx(G,{label:"Start Time",value:a.time,onChange:e=>g({...a,time:e})}),t.jsx(G,{label:"End Time",value:a.endTime,onChange:e=>g({...a,endTime:e})}),t.jsxs("select",{value:a.category,onChange:e=>g({...a,category:e.target.value}),required:!0,className:"calendar-select",children:[t.jsx("option",{value:"",children:"Select a Category"}),Object.keys(_).map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx(le,{label:"Address/Location",value:a.address,onChange:(e,n)=>{g({...a,address:e,addressMeta:n})},placeholder:"Start typing an Australian addressâ€¦",showTip:!1}),t.jsx("textarea",{placeholder:"Description",value:a.description,onChange:e=>g({...a,description:e.target.value}),className:"calendar-textarea"}),t.jsxs("div",{className:"calendar-form-actions",children:[t.jsx("button",{className:"calendar-btn-main",type:"submit",children:o?"Update Appointment":"Add Appointment"}),t.jsx("button",{className:"calendar-btn-secondary",type:"button",onClick:()=>{b(!1),m(null)},children:"Cancel"}),o&&t.jsx("button",{className:"calendar-btn-delete",type:"button",onClick:()=>ee(o),children:"Delete"})]})]})]}),t.jsxs("div",{className:"calendar-section",children:[t.jsxs("div",{className:"calendar-nav-header",children:[t.jsx("button",{onClick:()=>K(-1),className:"calendar-nav-btn",children:"â€¹ Previous"}),t.jsxs("h3",{className:"calendar-nav-title",children:[y==="monthly"&&new Intl.DateTimeFormat("en-AU",{timeZone:x,month:"long",year:"numeric"}).format(u),y==="weekly"&&`Week of ${new Intl.DateTimeFormat("en-AU",{timeZone:x,month:"short",day:"numeric",year:"numeric"}).format(u)}`,y==="daily"&&new Intl.DateTimeFormat("en-AU",{timeZone:x,weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(u)]}),t.jsx("button",{onClick:()=>K(1),className:"calendar-nav-btn",children:"Next â€º"}),t.jsxs("div",{className:"calendar-view-switcher",children:[t.jsx("button",{className:`calendar-view-btn${y==="monthly"?" active":""}`,onClick:()=>S("monthly"),type:"button",children:"Monthly"}),t.jsx("button",{className:`calendar-view-btn${y==="weekly"?" active":""}`,onClick:()=>S("weekly"),type:"button",children:"Weekly"}),t.jsx("button",{className:`calendar-view-btn${y==="daily"?" active":""}`,onClick:()=>S("daily"),type:"button",children:"Daily"})]})]}),y==="monthly"&&t.jsx("div",{className:"calendar-monthly-grid",children:ne().map((e,n)=>{const i=Y(e),c=e.getMonth()===u.getMonth(),r=e.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`calendar-day ${c?"":"calendar-day-muted"} ${r?"calendar-day-today":""}`,children:[t.jsx("div",{className:"calendar-day-date",children:e.getDate()}),i.filter(s=>{const l=s.time&&s.endTime&&String(s.time).trim()&&String(s.endTime).trim();return console.log("Appointment filter check:",s.id,"hasTime:",l,"time:",s.time,"endTime:",s.endTime),l}).map(s=>{const l=z(s.category);return t.jsxs("div",{className:"calendar-appointment",style:{backgroundColor:l.color,color:l.textColor},onClick:()=>{B(s)},children:[t.jsxs("div",{className:"calendar-appointment-time",children:[s.time," - ",s.endTime]}),t.jsx("div",{className:"calendar-appointment-title",children:s.title})]},s.id)})]},n)})}),y==="weekly"&&t.jsxs("div",{className:"calendar-weekly-grid",children:[t.jsxs("div",{className:"calendar-time-slots",children:[t.jsx("div",{className:"calendar-time-slot-header"}),H().map((e,n)=>t.jsx("div",{className:"calendar-time-slot",children:n%4===0?e:""},e))]}),t.jsx("div",{className:"calendar-days-grid",children:ae().map((e,n)=>{const i=Y(e),c=e.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`calendar-day ${c?"calendar-day-today":""}`,children:[t.jsx("div",{className:"calendar-day-header",children:e.toLocaleDateString("en-US",{weekday:"short",month:"numeric",day:"numeric"})}),t.jsxs("div",{className:"calendar-day-body",children:[H().map((r,s)=>t.jsx("div",{className:"calendar-time-slot"},r)),i.filter(r=>{const s=r.time&&r.endTime&&String(r.time).trim()&&String(r.endTime).trim();return console.log("Weekly view appointment filter:",r.id,"hasTime:",s,"time:",r.time,"endTime:",r.endTime),s}).map(r=>{const s=z(r.category),[l,f]=r.time.split(":").map(Number),[P,se]=r.endTime.split(":").map(Number),q=l*60+f,re=P*60+se,oe=Math.max(30,re-q);return t.jsxs("div",{className:"calendar-appointment",style:{top:`${q}px`,height:`${oe}px`,backgroundColor:s.color,color:s.textColor},onClick:()=>{B(r)},children:[t.jsxs("div",{className:"calendar-appointment-time",children:[r.time," - ",r.endTime]}),t.jsx("div",{className:"calendar-appointment-title",children:r.title})]},r.id)})]})]},n)})})]}),y==="daily"&&t.jsxs("div",{className:"calendar-daily-grid",children:[t.jsxs("div",{className:"calendar-time-slots",children:[t.jsx("div",{className:"calendar-time-slot-header"}),H().map((e,n)=>t.jsx("div",{className:"calendar-time-slot",children:n%4===0?e:""},e))]}),t.jsxs("div",{className:"calendar-single-day",children:[t.jsx("div",{className:"calendar-day-header",children:u.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),t.jsxs("div",{className:"calendar-day-body",children:[H().map((e,n)=>t.jsx("div",{className:"calendar-time-slot"},e)),Y(u).filter(e=>{const n=e.time&&e.endTime&&String(e.time).trim()&&String(e.endTime).trim();return console.log("Daily view appointment filter:",e.id,"hasTime:",n,"time:",e.time,"endTime:",e.endTime),n}).map(e=>{const n=z(e.category),[i,c]=e.time.split(":").map(Number),[r,s]=e.endTime.split(":").map(Number),l=i*60+c,f=r*60+s,P=Math.max(30,f-l);return t.jsxs("div",{className:"calendar-appointment",style:{top:`${l}px`,height:`${P}px`,backgroundColor:n.color,color:n.textColor},onClick:()=>{B(e)},children:[t.jsxs("div",{className:"calendar-appointment-time",children:[e.time," - ",e.endTime]}),t.jsx("div",{className:"calendar-appointment-title",children:e.title}),t.jsx("div",{className:"calendar-appointment-category",children:e.category})]},e.id)})]})]})]})]}),t.jsx(ce,{open:X.open,title:"Delete Appointment",message:"Are you sure you want to delete this appointment? This action cannot be undone.",onConfirm:te,onCancel:()=>O({open:!1,id:null})})]}):t.jsx("div",{className:"calendar-container",children:t.jsxs("div",{className:"calendar-card",style:{maxWidth:500,margin:"3rem auto",textAlign:"center"},children:[t.jsx("h1",{className:"calendar-title",children:"ðŸ”’ Calendar Access Required"}),t.jsx("p",{style:{color:"#666",marginBottom:24},children:"Please log in to access the calendar system."}),t.jsx("a",{href:"/login",className:"calendar-btn-main",children:"Go to Login Page"})]})})};export{ue as default};
