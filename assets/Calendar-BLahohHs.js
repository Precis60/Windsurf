import{j as t}from"./index-BaYZAXF3.js";import{b as m}from"./vendor-DIN34KHw.js";import{a as u}from"./firebaseService-DZryI02G.js";import"./firebase-BVsHjDpH.js";const G=()=>{const[j,w]=m.useState(!1),[g,S]=m.useState({username:"",password:""}),[I,B]=m.useState(""),[p,D]=m.useState("monthly"),[E,b]=m.useState([]),[C,h]=m.useState(!1),[y,f]=m.useState(null),[a,L]=m.useState(new Date),[o,d]=m.useState({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:""}),z=["Site Survey","Network Installation","Cable Installation","Equipment Setup","Maintenance","Repair","Consultation","Training","Safety Inspection","Project Planning","Client Meeting ","Troubleshooting","Upgrade","Testing & Commissioning","Documentation","Emergency Call","Preventive Maintenance","System Integration","Quality Assurance","Follow-up"],P=e=>{e.preventDefault(),B("");const n={username:"admin",password:"calendar2025"};g.username===n.username&&g.password===n.password?(w(!0),sessionStorage.setItem("calendarAuth","true")):B("Invalid username or password")},W=()=>{w(!1),S({username:"",password:""}),sessionStorage.removeItem("calendarAuth")};m.useEffect(()=>{const e=()=>{sessionStorage.removeItem("calendarAuth")},n=()=>{document.hidden&&(sessionStorage.removeItem("calendarAuth"),w(!1))};return window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",n),()=>{window.removeEventListener("beforeunload",e),document.removeEventListener("visibilitychange",n),sessionStorage.removeItem("calendarAuth")}},[]),m.useEffect(()=>{if(j){(async()=>{try{const i=await u.getAll();if(i.length>0)b(i);else{const r=[{title:"Client Site Survey",client:"ABC Manufacturing",date:"2025-01-20",time:"10:00",endTime:"12:00",description:"Initial site assessment for network infrastructure",category:"Site Survey",address:"123 Industrial Blvd, Manufacturing District"},{title:"Network Infrastructure Install",client:"Office Complex",date:"2025-01-25",time:"09:00",endTime:"17:00",description:"Complete network setup and configuration",category:"Network Installation",address:"456 Business Park Dr, Suite 200"},{title:"Safety Training & Equipment Inspection",client:"Internal",date:"2025-02-01",time:"14:00",endTime:"16:00",description:"Quarterly safety review and equipment maintenance",category:"Safety Inspection",address:"Company Headquarters"}];for(const s of r)await u.add(s);const l=await u.getAll();b(l)}}catch(i){console.error("Error loading appointments:",i);const r=localStorage.getItem("appointments");r&&b(JSON.parse(r))}})();const n=u.onSnapshot(i=>{b(i)});return()=>n()}},[j]);const N=async e=>{e.preventDefault();try{await u.add(o),d({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:""}),h(!1)}catch(n){console.error("Error adding appointment:",n),alert("Failed to add appointment. Please try again.")}},q=async e=>{e.preventDefault();try{await u.update(y,o),d({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:""}),f(null),h(!1)}catch(n){console.error("Error updating appointment:",n),alert("Failed to update appointment. Please try again.")}},U=async e=>{if(window.confirm("Are you sure you want to delete this appointment?"))try{await u.delete(e)}catch(n){console.error("Error deleting appointment:",n),alert("Failed to delete appointment. Please try again.")}},k=e=>{const n=e.toISOString().split("T")[0];return E.filter(i=>i.date===n)},F=()=>{const e=a.getFullYear(),n=a.getMonth(),i=new Date(e,n,1),r=new Date(i);r.setDate(r.getDate()-i.getDay());const l=[];for(let s=0;s<42;s++){const x=new Date(r);x.setDate(r.getDate()+s),l.push(x)}return l},$=()=>{const e=new Date(a);e.setDate(a.getDate()-a.getDay());const n=[];for(let i=0;i<7;i++){const r=new Date(e);r.setDate(e.getDate()+i),n.push(r)}return n},M=e=>{const n=new Date(a);switch(p){case"monthly":n.setMonth(a.getMonth()+e);break;case"weekly":n.setDate(a.getDate()+e*7);break;case"daily":n.setDate(a.getDate()+e);break}L(n)},v=()=>{const e=[];for(let n=0;n<24;n++)for(let i=0;i<60;i+=15){const r=`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`;e.push(r)}return e},c={background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",margin:"0 0.5rem"},A={...c,background:"#1a2538"};return j?t.jsxs("div",{className:"page-content",style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("h1",{style:{color:"#22314a",margin:0},children:"Calendar Management"}),t.jsx("button",{onClick:W,style:{...c,background:"#dc3545"},children:"Logout"})]}),t.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem"},children:"Manage appointments and view your schedule."}),t.jsxs("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[t.jsx("button",{style:p==="monthly"?A:c,onClick:()=>D("monthly"),children:"Monthly View"}),t.jsx("button",{style:p==="weekly"?A:c,onClick:()=>D("weekly"),children:"Weekly View"}),t.jsx("button",{style:p==="daily"?A:c,onClick:()=>D("daily"),children:"Daily View"})]}),t.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem"},children:t.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef",width:"100%",maxWidth:"600px"},children:[t.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"Appointment Management"}),t.jsx("button",{style:c,onClick:()=>{h(!C),f(null),d({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:""})},children:C?"Cancel":"Add New Appointment"}),C&&t.jsxs("form",{onSubmit:y?q:N,style:{marginTop:"1rem"},children:[t.jsx("input",{type:"text",placeholder:"Appointment Title",value:o.title,onChange:e=>d({...o,title:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc"}}),t.jsx("input",{type:"text",placeholder:"Client Name",value:o.client,onChange:e=>d({...o,client:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc"}}),t.jsx("input",{type:"date",value:o.date,onChange:e=>d({...o,date:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc"}}),t.jsx("input",{type:"time",placeholder:"Start Time",value:o.time,onChange:e=>d({...o,time:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc"}}),t.jsx("input",{type:"time",placeholder:"End Time",value:o.endTime,onChange:e=>d({...o,endTime:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc"}}),t.jsxs("select",{value:o.category,onChange:e=>d({...o,category:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc"},children:[t.jsx("option",{value:"",children:"Select Category"}),z.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("input",{type:"text",placeholder:"Address/Location",value:o.address,onChange:e=>d({...o,address:e.target.value}),style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc"}}),t.jsx("textarea",{placeholder:"Description",value:o.description,onChange:e=>d({...o,description:e.target.value}),style:{width:"100%",padding:"0.5rem",margin:"0.25rem 0",borderRadius:"4px",border:"1px solid #ccc",minHeight:"60px"}}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[t.jsx("button",{type:"submit",style:{...c,flex:1},children:y?"Update Appointment":"Add Appointment"}),y&&t.jsx("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to delete this appointment?")&&U(y)},style:{...c,background:"#dc3545",flex:1},children:"Delete Appointment"})]})]})]})}),t.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[t.jsx("button",{onClick:()=>M(-1),style:c,children:"‹ Previous"}),t.jsxs("h3",{style:{color:"#22314a",margin:0},children:[p==="monthly"&&a.toLocaleDateString("en-US",{month:"long",year:"numeric"}),p==="weekly"&&`Week of ${a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`,p==="daily"&&a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]}),t.jsx("button",{onClick:()=>M(1),style:c,children:"Next ›"})]}),p==="monthly"&&t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"1px"},children:F().map((e,n)=>{const i=k(e),r=e.getMonth()===a.getMonth(),l=e.toDateString()===new Date().toDateString();return t.jsxs("div",{style:{minHeight:"100px",padding:"0.25rem",background:r?"white":"#f8f9fa",border:l?"2px solid #22314a":"1px solid #dee2e6",opacity:r?1:.6},children:[t.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:e.getDate()}),i.map(s=>t.jsxs("div",{style:{background:"#e3f2fd",padding:"2px 4px",margin:"1px 0",borderRadius:"3px",fontSize:"0.7rem",cursor:"pointer",border:"1px solid #2196f3"},onClick:()=>{d(s),f(s.id),h(!0)},children:[t.jsxs("div",{style:{fontWeight:"bold"},children:[s.time," - ",s.endTime," ",s.title]}),t.jsx("div",{children:s.client})]},s.id))]},n)})}),p==="weekly"&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs("div",{style:{width:"80px",borderRight:"1px solid #dee2e6"},children:[t.jsx("div",{style:{height:"40px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"}}),v().map((e,n)=>t.jsx("div",{style:{height:"15px",fontSize:"0.7rem",padding:"0 0.25rem",borderBottom:n%4===3?"1px solid #ccc":"1px solid #f0f0f0",display:"flex",alignItems:"center",background:"#f8f9fa",justifyContent:"flex-end"},children:n%4===0?e:""},e))]}),t.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"1px"},children:$().map((e,n)=>{const i=k(e);return e.toDateString(),new Date().toDateString(),t.jsxs("div",{style:{background:"white",border:"1px solid #dee2e6",position:"relative"},children:[t.jsx("div",{style:{height:"40px",fontWeight:"bold",padding:"0.5rem",textAlign:"center",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"},children:e.toLocaleDateString("en-US",{weekday:"short",month:"numeric",day:"numeric"})}),t.jsxs("div",{style:{height:`${15*96}px`,position:"relative"},children:[v().map((r,l)=>t.jsx("div",{style:{height:"15px",borderBottom:l%4===3?"1px solid #ccc":"1px solid #f0f0f0"}},r)),i.map(r=>{const[l,s]=r.time.split(":").map(Number),[x,T]=r.endTime.split(":").map(Number),R=(l*60+s)/15*15,H=(x*60+T)/15*15,V=Math.max(30,H-R);return t.jsxs("div",{style:{position:"absolute",top:`${R}px`,left:"2px",right:"2px",height:`${V}px`,fontSize:"0.7rem",padding:"0.25rem",background:"#22314a",color:"white",borderRadius:"4px",cursor:"pointer",zIndex:1},onClick:()=>{d(r),f(r.id),h(!0)},children:[t.jsxs("div",{style:{fontWeight:"bold"},children:[r.time," - ",r.endTime," ",r.title]}),t.jsx("div",{children:r.client})]},r.id)})]})]},n)})})]}),p==="daily"&&t.jsxs("div",{style:{display:"flex"},children:[t.jsxs("div",{style:{width:"80px",borderRight:"1px solid #dee2e6"},children:[t.jsx("div",{style:{height:"40px",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"}}),v().map((e,n)=>t.jsx("div",{style:{height:"15px",fontSize:"0.7rem",padding:"0 0.25rem",borderBottom:n%4===3?"1px solid #ccc":"1px solid #f0f0f0",display:"flex",alignItems:"center",background:"#f8f9fa",justifyContent:"flex-end"},children:n%4===0?e:""},e))]}),t.jsx("div",{style:{flex:1},children:t.jsxs("div",{style:{background:"white",border:"1px solid #dee2e6",position:"relative"},children:[t.jsx("div",{style:{height:"40px",fontWeight:"bold",padding:"0.5rem",textAlign:"center",borderBottom:"1px solid #dee2e6",background:"#f8f9fa"},children:a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),t.jsxs("div",{style:{height:`${15*96}px`,position:"relative"},children:[v().map((e,n)=>t.jsx("div",{style:{height:"15px",borderBottom:n%4===3?"1px solid #ccc":"1px solid #f0f0f0"}},e)),k(a).map(e=>{const[n,i]=e.time.split(":").map(Number),[r,l]=e.endTime.split(":").map(Number),s=(n*60+i)/15*15,x=(r*60+l)/15*15,T=Math.max(30,x-s);return t.jsxs("div",{style:{position:"absolute",top:`${s}px`,left:"2px",right:"2px",height:`${T}px`,fontSize:"0.8rem",padding:"0.5rem",background:"#22314a",color:"white",borderRadius:"4px",cursor:"pointer",zIndex:1},onClick:()=>{d(e),f(e.id),h(!0)},children:[t.jsxs("div",{style:{fontWeight:"bold"},children:[e.time," - ",e.endTime," ",e.title]}),t.jsx("div",{children:e.client}),t.jsx("div",{style:{fontSize:"0.7rem",marginTop:"0.25rem"},children:e.category})]},e.id)})]})]})})]})]})]}):t.jsx("div",{className:"page-content",style:{padding:"2rem",maxWidth:"600px",margin:"0 auto"},children:t.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",textAlign:"center"},children:[t.jsx("h1",{style:{color:"#22314a",marginBottom:"1rem"},children:"Calendar Access"}),t.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem",color:"#666"},children:"Please login to access the calendar management system."}),t.jsxs("form",{onSubmit:P,style:{maxWidth:"400px",margin:"0 auto"},children:[t.jsx("input",{type:"text",placeholder:"Username",value:g.username,onChange:e=>S({...g,username:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",margin:"0.5rem 0",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),t.jsx("input",{type:"password",placeholder:"Password",value:g.password,onChange:e=>S({...g,password:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",margin:"0.5rem 0",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),I&&t.jsx("div",{style:{color:"#dc3545",margin:"0.5rem 0",fontSize:"0.9rem"},children:I}),t.jsx("button",{type:"submit",style:{...c,width:"100%",padding:"0.75rem",fontSize:"1rem",marginTop:"1rem"},children:"Login to Calendar"})]}),t.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"4px",fontSize:"0.9rem",color:"#1976d2"},children:[t.jsx("strong",{children:"Demo Credentials:"}),t.jsx("br",{}),"Username: admin",t.jsx("br",{}),"Password: calendar2025"]})]})})};export{G as default};
