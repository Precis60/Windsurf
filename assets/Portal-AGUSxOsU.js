import{a as l,e as v,j as e}from"./index-z83d4aJt.js";import{b as a}from"./vendor-DPLMwiL-.js";const C=()=>{const[h,p]=a.useState(!1),[f,y]=a.useState(!0),[j,m]=a.useState(!1),[r,o]=a.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[n,d]=a.useState({type:"",text:""}),[u,g]=a.useState(0),b=async t=>{if(t.preventDefault(),d({type:"",text:""}),r.password!==r.confirmPassword){d({type:"error",text:"Passwords do not match."});return}try{await l.register({firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password}),d({type:"success",text:"Registration successful! You can now log in."}),o({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),m(!1),setTimeout(()=>{window.location.href="/login"},2e3)}catch(s){d({type:"error",text:s.message||"Registration failed. Please try again."})}};a.useEffect(()=>{(()=>{const s=l.isAuthenticated();p(s),y(!1)})();try{const s=l.getCurrentUser?.();s&&(s.role==="admin"||s.role==="staff")&&v.getAll("?status=pending").then(c=>{const w=Array.isArray(c)?c:c.requests||[];g(w.length||0)}).catch(()=>g(0))}catch{}},[]);const i={padding:"10px",borderRadius:"4px",border:"1px solid #ccc",width:"100%",boxSizing:"border-box"},x={background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",margin:"0 0.5rem"};return f?e.jsx("div",{className:"page-content",style:{padding:"2rem",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsxs("div",{style:{textAlign:"center",color:"#666"},children:[e.jsx("h2",{children:"Loading Portal..."}),e.jsx("p",{children:"Please wait while we load your portal data."})]})}):h?e.jsxs("div",{className:"page-content",style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("h1",{style:{color:"#22314a",margin:0,display:"flex",alignItems:"center",gap:8},children:["Company Portal",u>0&&e.jsx("span",{style:{background:"#e11d48",color:"#fff",borderRadius:999,padding:"2px 8px",fontSize:12},title:"Pending appointment requests",children:u})]}),e.jsx("button",{onClick:()=>{l.logout(),p(!1),window.location.href="/"},style:{...x,background:"#dc3545"},children:"Logout"})]}),e.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem"},children:"Internal tools for staff and administrators: projects, calendar, tickets, and more."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"Client Login"}),e.jsx("p",{children:"Access your project documents, invoices, and progress updates."}),e.jsx("button",{style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem"},children:"Client Login"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"Staff Portal"}),e.jsx("p",{children:"Internal tools for project management, timesheets, and team communication."}),e.jsx("button",{style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem"},children:"Staff Login"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"Quick Access"}),e.jsxs("ul",{style:{listStyle:"none",padding:0},children:[e.jsx("li",{style:{padding:"0.5rem 0",borderBottom:"1px solid #dee2e6"},children:"ðŸ“„ Project Documents"}),e.jsx("li",{style:{padding:"0.5rem 0",borderBottom:"1px solid #dee2e6"},children:"ðŸ’° Invoice Management"}),e.jsx("li",{style:{padding:"0.5rem 0",borderBottom:"1px solid #dee2e6"},children:"ðŸ“Š Progress Reports"}),e.jsx("li",{style:{padding:"0.5rem 0"},children:"ðŸ’¬ Message Center"})]})]})]})]}):e.jsxs("div",{className:"page-content",style:{padding:"2rem",maxWidth:"600px",margin:"0 auto"},children:[e.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",textAlign:"center"},children:[e.jsx("h1",{style:{color:"#22314a",marginBottom:"1rem"},children:"ðŸ”’ Portal Access Required"}),e.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem",color:"#666"},children:"Please log in to access the secure business portal system."}),e.jsx("div",{style:{background:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"8px",padding:"20px",marginBottom:"20px"},children:e.jsxs("p",{style:{margin:0,color:"#2e7d32",fontSize:"14px"},children:["ðŸ” ",e.jsx("strong",{children:"Secure Access:"})," This portal contains sensitive business information and requires authentication."]})}),e.jsx("a",{href:"/login",style:{background:"#22314a",color:"white",padding:"12px 24px",borderRadius:"8px",textDecoration:"none",fontSize:"16px",fontWeight:"500",display:"inline-block"},children:"Go to Login Page"}),e.jsx("div",{style:{marginTop:"2rem",fontSize:"14px"},children:e.jsxs("p",{children:["Don't have an account? ",e.jsx("span",{onClick:()=>m(!0),style:{color:"#007bff",cursor:"pointer",textDecoration:"underline"},children:"Create one here"}),"."]})})]}),j&&e.jsxs("div",{style:{background:"#fff",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",marginTop:"2rem"},children:[e.jsx("h2",{style:{color:"#22314a",marginBottom:"1.5rem",textAlign:"center"},children:"Create New Account"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsx("input",{type:"text",placeholder:"First Name",value:r.firstName,onChange:t=>o({...r,firstName:t.target.value}),required:!0,style:i}),e.jsx("input",{type:"text",placeholder:"Last Name",value:r.lastName,onChange:t=>o({...r,lastName:t.target.value}),required:!0,style:i})]}),e.jsx("input",{type:"email",placeholder:"Email Address",value:r.email,onChange:t=>o({...r,email:t.target.value}),required:!0,style:{...i,width:"calc(100% - 20px)",marginTop:"1rem"}}),e.jsx("input",{type:"password",placeholder:"Password (min 8 characters)",value:r.password,onChange:t=>o({...r,password:t.target.value}),required:!0,style:{...i,width:"calc(100% - 20px)",marginTop:"1rem"}}),e.jsx("input",{type:"password",placeholder:"Confirm Password",value:r.confirmPassword,onChange:t=>o({...r,confirmPassword:t.target.value}),required:!0,style:{...i,width:"calc(100% - 20px)",marginTop:"1rem"}}),n.text&&e.jsx("div",{style:{marginTop:"1rem",padding:"10px",borderRadius:"4px",backgroundColor:n.type==="error"?"#f8d7da":"#d4edda",color:n.type==="error"?"#721c24":"#155724"},children:n.text}),e.jsx("button",{type:"submit",style:{...x,width:"100%",marginTop:"1.5rem"},children:"Create Account"})]})]})]})};export{C as default};
