import{j as e,e as f,p as A}from"./index-CbW64TiT.js";import{u as q,b as s}from"./vendor-Dd4J3GVN.js";const N=[{id:"security",name:"Security"},{id:"access-control",name:"Access Control"},{id:"it",name:"Information Technology"},{id:"cctv",name:"CCTV"},{id:"consultation",name:"Consultation"},{id:"maintenance",name:"Routine Maintenance"},{id:"av",name:"Audio Visual"},{id:"automation",name:"Automation"},{id:"network",name:"Network Programming"},{id:"electrical",name:"Electrical Works"},{id:"contractor",name:"Contractor"},{id:"garden",name:"Garden Works"},{id:"lighting",name:"Electrical & Lighting"}],P=()=>{const p=q(),[r,x]=s.useState({projectName:"",projectCode:"",clientName:"",clientAddress:"",requestDate:"",dueDate:"",priority:"Medium",status:"Planning",requestedBy:"",description:"",category:"security"}),[l,o]=s.useState(!1),[c,m]=s.useState(null),[d,u]=s.useState([]),[a,h]=s.useState(""),[j,g]=s.useState([]),n=t=>{const{name:i,value:C}=t.target;x(w=>({...w,[i]:C}))},y=()=>{a.trim()!==""&&(u([...d,{id:Date.now(),description:a,status:"Pending"}]),h(""))},b=t=>{u(d.filter(i=>i.id!==t))};s.useEffect(()=>{(async()=>{try{const i=await f.getAll();i&&Array.isArray(i)&&g(i)}catch(i){console.error("Failed to fetch clients",i)}})()},[]);const v=async t=>{t.preventDefault(),o(!0),m(null);try{await A.create(r),p("/projects")}catch(i){m(i.message||"Failed to create project"),o(!1)}};return e.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[e.jsx("h1",{style:{color:"#22314a",marginBottom:"2rem"},children:"Add New Project"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{children:"Project Name"}),e.jsx("input",{type:"text",name:"projectName",value:r.projectName,onChange:n,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Project Code"}),e.jsx("input",{type:"text",name:"projectCode",value:r.projectCode,onChange:n,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Client Name"}),e.jsxs("select",{name:"clientName",value:r.clientName,onChange:n,required:!0,style:{width:"100%",padding:"0.5rem"},children:[e.jsx("option",{value:"",children:"Select a client"}),j.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Client Address"}),e.jsx("input",{type:"text",name:"clientAddress",value:r.clientAddress,onChange:n,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Request Date"}),e.jsx("input",{type:"date",name:"requestDate",value:r.requestDate,onChange:n,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",value:r.dueDate,onChange:n,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Priority"}),e.jsxs("select",{name:"priority",value:r.priority,onChange:n,style:{width:"100%",padding:"0.5rem"},children:[e.jsx("option",{children:"Low"}),e.jsx("option",{children:"Medium"}),e.jsx("option",{children:"High"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{name:"status",value:r.status,onChange:n,style:{width:"100%",padding:"0.5rem"},children:[e.jsx("option",{children:"Planning"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"On Hold"}),e.jsx("option",{children:"Completed"}),e.jsx("option",{children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Category"}),e.jsx("select",{name:"category",value:r.category,onChange:n,style:{width:"100%",padding:"0.5rem"},children:N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]}),e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Requested By"}),e.jsx("input",{type:"text",name:"requestedBy",value:r.requestedBy,onChange:n,required:!0,style:{width:"100%",padding:"0.5rem"}})]}),e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{name:"description",value:r.description,onChange:n,rows:"4",style:{width:"100%",padding:"0.5rem"}})]})]}),e.jsx("h2",{style:{color:"#22314a",marginTop:"2rem",marginBottom:"1rem"},children:"Jobs"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("input",{type:"text",placeholder:"New job description",value:a,onChange:t=>h(t.target.value),style:{flex:1,padding:"0.5rem"}}),e.jsx("button",{type:"button",onClick:y,style:{background:"#5cb85c",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"Add Job"})]}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[e.jsx("th",{style:{padding:"0.5rem",textAlign:"left"},children:"Description"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"left"},children:"Status"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"left"},children:"Actions"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid #eee"},children:[e.jsx("td",{style:{padding:"0.5rem"},children:t.description}),e.jsx("td",{style:{padding:"0.5rem"},children:t.status}),e.jsx("td",{style:{padding:"0.5rem"},children:e.jsx("button",{type:"button",onClick:()=>b(t.id),style:{background:"#dc3545",color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},t.id))})]}),e.jsx("button",{type:"submit",disabled:l,style:{background:"#22314a",color:"white",padding:"0.75rem 1.5rem",border:"none",borderRadius:"4px",cursor:"pointer"},children:l?"Creating...":"Create Project"}),c&&e.jsx("p",{style:{color:"red",marginTop:"1rem"},children:c})]})]})};export{P as default};
