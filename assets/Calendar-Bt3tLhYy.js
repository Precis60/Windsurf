import{j as e,a as K,b as E,c as ae}from"./index-Bi7HTg4J.js";import{b as p}from"./vendor-DPLMwiL-.js";const V=({value:g,onChange:f,label:D})=>{const[d,v]=p.useState("hour"),x=p.useRef(null),F=o=>{if(!o)return{hours:12,minutes:0};const[h,s]=o.split(":").map(Number);return{hours:h||12,minutes:s||0}},{hours:u,minutes:j}=F(g),M=u>12?u-12:u===0?12:u,I=M%12*30+j*.5-90,$=j*6-90,N=o=>{if(!x.current)return;const h=x.current.getBoundingClientRect(),s=h.left+h.width/2,m=h.top+h.height/2,C=o.clientX||o.touches&&o.touches[0]?.clientX,S=o.clientY||o.touches&&o.touches[0]?.clientY;if(!C||!S)return;const A=(Math.atan2(S-m,C-s)*180/Math.PI+90+360)%360;if(d==="hour"){const T=Math.round(A/30)%12,k=T===0?12:T,R=u>=12?k===12?12:k+12:k;f(`${R.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`),v("minute")}else if(d==="minute"){const T=Math.round(A/6)%60;f(`${u.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`)}},b=[];for(let o=1;o<=12;o++){const h=(o*30-90)*Math.PI/180,s=50+35*Math.cos(h),m=50+35*Math.sin(h),C=50+40*Math.cos(h),S=50+40*Math.sin(h),P=50+32*Math.cos(h),A=50+32*Math.sin(h);b.push(e.jsxs("g",{children:[e.jsx("line",{x1:s,y1:m,x2:C,y2:S,stroke:"#333",strokeWidth:"2"}),e.jsx("text",{x:P,y:A,textAnchor:"middle",dominantBaseline:"central",fontSize:"12",fill:"#333",children:o})]},o))}const w=[];for(let o=0;o<60;o+=5)if(o%15!==0){const h=(o*6-90)*Math.PI/180,s=50+37*Math.cos(h),m=50+37*Math.sin(h),C=50+40*Math.cos(h),S=50+40*Math.sin(h);w.push(e.jsx("line",{x1:s,y1:m,x2:C,y2:S,stroke:"#666",strokeWidth:"1"},o))}return e.jsxs("div",{style:{margin:"1rem 0"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:D}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{style:{position:"relative"},children:e.jsxs("svg",{ref:x,width:"200",height:"200",viewBox:"0 0 100 100",onClick:N,style:{border:`3px solid ${d==="hour"?"#22314a":"#dc3545"}`,borderRadius:"50%",background:d==="hour"?"#f8f9ff":"#fff8f8",cursor:"pointer",userSelect:"none"},children:[e.jsxs("defs",{children:[e.jsx("marker",{id:"hour-arrow",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"3",markerHeight:"3",orient:"auto-start-reverse",children:e.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:d==="hour"?"#22314a":"#aaa"})}),e.jsx("marker",{id:"minute-arrow",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"4",markerHeight:"4",orient:"auto-start-reverse",children:e.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:d==="minute"?"#dc3545":"#aaa"})})]}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"white",stroke:"#22314a",strokeWidth:"1"}),b,w,e.jsx("line",{x1:"50",y1:"50",x2:50+27*Math.cos(I*Math.PI/180),y2:50+27*Math.sin(I*Math.PI/180),stroke:d==="hour"?"#22314a":"#aaa",strokeWidth:d==="hour"?"3":"1",markerEnd:"url(#hour-arrow)",pointerEvents:"none"}),e.jsx("line",{x1:"50",y1:"50",x2:50+35*Math.cos($*Math.PI/180),y2:50+35*Math.sin($*Math.PI/180),stroke:d==="minute"?"#dc3545":"#aaa",strokeWidth:d==="minute"?"3":"1",markerEnd:"url(#minute-arrow)",pointerEvents:"none"}),e.jsx("circle",{cx:"50",cy:"50",r:"3",fill:"#22314a",pointerEvents:"none"})]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsxs("div",{style:{background:"#f8f9fa",border:"2px solid #22314a",borderRadius:"8px",padding:"1rem",textAlign:"center",minWidth:"120px"},children:[e.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#22314a",fontFamily:"monospace"},children:[M.toString().padStart(2,"0"),":",j.toString().padStart(2,"0")]}),e.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"0.25rem"},children:u>=12?"PM":"AM"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>{const o=u>=12?u-12:u;f(`${o.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`)},style:{padding:"0.5rem 1rem",border:"2px solid #22314a",borderRadius:"4px",background:u<12?"#22314a":"white",color:u<12?"white":"#22314a",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"AM"}),e.jsx("button",{type:"button",onClick:()=>{const o=u<12?u+12:u;f(`${o.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`)},style:{padding:"0.5rem 1rem",border:"2px solid #22314a",borderRadius:"4px",background:u>=12?"#22314a":"white",color:u>=12?"white":"#22314a",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"PM"})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>v("hour"),style:{padding:"0.5rem 1rem",border:"2px solid #22314a",borderRadius:"4px",background:d==="hour"?"#22314a":"white",color:d==="hour"?"white":"#22314a",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"Hours"}),e.jsx("button",{type:"button",onClick:()=>v("minute"),style:{padding:"0.5rem 1rem",border:"2px solid #dc3545",borderRadius:"4px",background:d==="minute"?"#dc3545":"white",color:d==="minute"?"white":"#dc3545",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"Minutes"})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#666",maxWidth:"150px",lineHeight:"1.4",textAlign:"center"},children:[e.jsx("div",{style:{marginBottom:"0.5rem",fontWeight:"bold",color:d==="hour"?"#22314a":"#dc3545"},children:d==="hour"?"Setting Hours":"Setting Minutes"}),e.jsxs("div",{children:["Click anywhere on the clock face to set the ",d==="hour"?"hour":"minute"]})]})]})]})]})};function se({label:g="Address/Location",value:f,onChange:D,placeholder:d="Start typing an addressâ€¦",required:v=!1}){const x=p.useRef(null);p.useRef(null);const[F,u]=p.useState(!1);return p.useEffect(()=>()=>{},[void 0,D]),e.jsxs("div",{children:[g&&e.jsx("label",{style:{display:"block",fontWeight:600,color:"#22314a",margin:"0.25rem 0"},children:g}),e.jsx("input",{ref:x,type:"text",value:f||"",onChange:M=>D(M.target.value),placeholder:d,className:"calendar-input",required:v,"aria-invalid":v&&!f?"true":"false"}),e.jsx("div",{style:{color:"#6c757d",fontSize:"0.85rem",marginTop:"0.25rem"},children:"Tip: Add VITE_GOOGLE_MAPS_API_KEY to enable Australian address autocomplete."})]})}const re=({open:g,title:f,message:D,onConfirm:d,onCancel:v})=>g?e.jsx("div",{className:"custom-modal-overlay",children:e.jsxs("div",{className:"custom-modal",children:[e.jsx("h3",{className:"custom-modal-title",children:f}),e.jsx("div",{className:"custom-modal-message",children:D}),e.jsxs("div",{className:"custom-modal-actions",children:[e.jsx("button",{className:"custom-modal-btn confirm",onClick:d,children:"Yes, Delete"}),e.jsx("button",{className:"custom-modal-btn cancel",onClick:v,children:"Cancel"})]})]})}):null,q={"Personal Calendar":{color:"#F8C8DC",textColor:"#22314a"},"Business Calendar":{color:"#CDEAC0",textColor:"#22314a"},"Kids Sports & Events":{color:"#FDE2A7",textColor:"#22314a"},"Personal Sports & Events":{color:"#FFCFD2",textColor:"#22314a"},"Centre Com Computers":{color:"#D7C0FD",textColor:"#22314a"},Commerical:{color:"#C7D2FE",textColor:"#22314a"},"Daniel Allison":{color:"#BDE0FE",textColor:"#22314a"},"Jaki Lew":{color:"#CAF0F8",textColor:"#22314a"},"Krongold Family":{color:"#B8E0D2",textColor:"#22314a"},"Krongold Group":{color:"#FFE5B4",textColor:"#22314a"},"Office & Administration":{color:"#E3F2C1",textColor:"#22314a"},"Peter & Alla Lew":{color:"#F9E2AF",textColor:"#22314a"},"Remote Programming":{color:"#E4C1F9",textColor:"#22314a"},Residential:{color:"#F1F0FF",textColor:"#22314a"},"Rosie Lew":{color:"#FFD6E0",textColor:"#22314a"},"Stevie Lew":{color:"#FFEDC2",textColor:"#22314a"},"Supply & Demand":{color:"#D0F4DE",textColor:"#22314a"},"Training & Research":{color:"#C9E4DE",textColor:"#22314a"},"Travel Time":{color:"#EAD7BB",textColor:"#22314a"},"Website & Marketing":{color:"#E0E0E0",textColor:"#22314a"},"Precision Home Education":{color:"#CFE1F2",textColor:"#22314a"}},O=g=>q[g]||{color:"#E0E0E0",textColor:"#000"},le=()=>{const g="Australia/Sydney",[f,D]=p.useState(!1),[d,v]=p.useState(!0),[x,F]=p.useState("monthly"),[u,j]=p.useState([]),[M,I]=p.useState([]),[$,N]=p.useState(!1),[b,w]=p.useState(null),[o,h]=p.useState(new Date),[s,m]=p.useState({title:"",date:"",time:"",endTime:"",client:"",customerId:"",description:"",category:"",address:"",addressMeta:null}),[C,S]=p.useState(""),[P,A]=p.useState(!1),T=M.filter(t=>`${t.firstName} ${t.lastName}`.toLowerCase().includes(C.toLowerCase()));p.useEffect(()=>{(()=>{const n=K.isAuthenticated();D(n),v(!1)})()},[]);const k=t=>{if(!t.appointmentDate)return t;const n=new Date(t.appointmentDate),i=new Intl.DateTimeFormat("en-CA",{timeZone:g,year:"numeric",month:"2-digit",day:"2-digit"}).format(n),c=new Intl.DateTimeFormat("en-AU",{timeZone:g,hour:"2-digit",minute:"2-digit",hour12:!1}).format(n);let r=c;if(t.durationMinutes){const a=new Date(n.getTime()+t.durationMinutes*6e4);r=new Intl.DateTimeFormat("en-AU",{timeZone:g,hour:"2-digit",minute:"2-digit",hour12:!1}).format(a)}return{...t,time:c,endTime:r,date:i,appointmentDate:t.appointmentDate}};p.useEffect(()=>{f&&(async()=>{try{const n=await E.getAll(),i=Array.isArray(n)?n:n.appointments||[];console.log("Loaded raw appointments:",i);const c=i.map(k);console.log("Transformed appointments:",c),j(c);const r=await ae.getAll(),a=Array.isArray(r)?r:r.customers||[];I(a)}catch(n){console.error("Error loading data:",n),j([]),I([])}})()},[f]);const R=async t=>{t.preventDefault(),console.log("Attempting to create appointment with data:",s);const n=z(s.time,s.endTime);if(isNaN(n)||n<15||n>480){alert("Duration must be between 15 and 480 minutes.");return}if(!s.customerId||isNaN(Number(s.customerId))||!Number.isInteger(Number(s.customerId))){alert("Please select a valid client from the dropdown.");return}const i=`${s.date}T${s.time}:00`,c=new Date(i),r={title:s.title,description:s.description||`Client: ${s.client}
Category: ${s.category}
Address: ${s.address}`,appointmentDate:c.toISOString(),durationMinutes:n,customerId:Number(s.customerId),address:s.address||"",addressPlaceId:s.addressMeta?.placeId||null,addressLat:s.addressMeta?.lat??null,addressLng:s.addressMeta?.lng??null,addressComponents:s.addressMeta?.components||null};console.log("Appointment payload:",r),Object.keys(r).forEach(a=>{console.log(`${a}:`,r[a],"type:",typeof r[a])});try{const a=await E.create(r);console.log("Appointment created successfully:",a),m({title:"",date:"",time:"",endTime:"",client:"",customerId:"",description:"",category:"",address:"",addressMeta:null}),N(!1);const l=await E.getAll(),L=(Array.isArray(l)?l:l.appointments||[]).map(k);j(L),alert("Appointment added successfully!")}catch(a){let l="Failed to add appointment. ";a.response&&a.response.data&&a.response.data.error?(typeof a.response.data.error=="string"?l+=a.response.data.error:a.response.data.error.message?l+=a.response.data.error.message:l+=JSON.stringify(a.response.data.error),a.response.data.error.details&&(l+=`
Details:`,a.response.data.error.details.forEach(y=>{l+=`
- ${y.path}: ${y.msg} (value: ${y.value})`}))):a.message&&(l+=a.message),alert(l)}},z=(t,n)=>{const[i,c]=t.split(":").map(Number),[r,a]=n.split(":").map(Number),l=i*60+c;return r*60+a-l},G=async t=>{t.preventDefault();const n=`${s.date}T${s.time}:00`,i=new Date(n),c=z(s.time,s.endTime),r={...s,appointmentDate:i.toISOString(),durationMinutes:c,address:s.address||"",addressPlaceId:s.addressMeta?.placeId||null,addressLat:s.addressMeta?.lat??null,addressLng:s.addressMeta?.lng??null,addressComponents:s.addressMeta?.components||null};try{await E.update(b,r),m({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:"",addressMeta:null}),w(null),N(!1);const a=await E.getAll(),y=(Array.isArray(a)?a:a.appointments||[]).map(k);j(y)}catch(a){console.error("Error updating appointment:",a),alert("Failed to update appointment. Please try again.")}},[U,H]=p.useState({open:!1,id:null}),_=async t=>{H({open:!0,id:t})},J=async()=>{const t=U.id;H({open:!1,id:null});try{await E.delete(t);const n=await E.getAll(),c=(Array.isArray(n)?n:n.appointments||[]).map(k);j(c)}catch(n){console.error("Error deleting appointment:",n),alert("Failed to delete appointment. Please try again.")}},B=t=>{const n=new Intl.DateTimeFormat("en-CA",{timeZone:g,year:"numeric",month:"2-digit",day:"2-digit"}).format(t);return u.filter(i=>i.date===n)},Z=()=>{const t=Number(new Intl.DateTimeFormat("en-US",{timeZone:g,year:"numeric"}).format(o)),n=Number(new Intl.DateTimeFormat("en-US",{timeZone:g,month:"numeric"}).format(o))-1,i=new Date(t,n,1),c=i.getDay();let r=new Date(i);r.setDate(r.getDate()-c);const a=[];for(let l=0;l<42;l++){const y=new Date(r);y.setDate(r.getDate()+l),a.push(y)}return a},Q=()=>{const t=o.getDay(),n=new Date(o);n.setDate(o.getDate()-t);const i=[];for(let c=0;c<7;c++){const r=new Date(n);r.setDate(n.getDate()+c),i.push(r)}return i},Y=t=>{const n=new Date(o);switch(x){case"monthly":n.setMonth(o.getMonth()+t);break;case"weekly":n.setDate(o.getDate()+t*7);break;case"daily":n.setDate(o.getDate()+t);break}h(n)},W=()=>{const t=[];for(let n=0;n<24;n++)for(let i=0;i<60;i+=15){const c=`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`;t.push(c)}return t};return d?e.jsx("div",{className:"calendar-container",style:{minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("h2",{children:"Loading Calendar..."})}):f?e.jsxs("div",{className:"calendar-container",children:[e.jsxs("div",{className:"calendar-header",children:[e.jsx("h1",{className:"calendar-title",children:"Calendar Management"}),e.jsx("button",{className:"calendar-logout-btn",onClick:()=>{K.logout(),D(!1),window.location.href="/"},children:"Logout"})]}),e.jsx("div",{className:"calendar-dashboard",children:e.jsxs("div",{className:"calendar-card",children:[e.jsx("h3",{children:"Appointment Management"}),e.jsx("p",{children:"View and manage appointments, clients, and schedules."}),e.jsx("button",{className:"calendar-btn-main",onClick:()=>{N(!$),w(null),m({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:"",addressMeta:null})},children:$?"Cancel":"Add New Appointment"})]})}),$&&e.jsxs("div",{className:"calendar-section",children:[e.jsx("h2",{style:{color:"#22314a",marginBottom:"1.5rem"},children:b?"Edit Appointment":"Add New Appointment"}),e.jsxs("form",{className:"calendar-form",onSubmit:t=>{if(t.preventDefault(),!s.customerId){alert("Please select a valid client from the dropdown.");return}(b?G:R)(t)},noValidate:!0,children:[e.jsx("input",{type:"text",placeholder:"Appointment Title",value:s.title,onChange:t=>m({...s,title:t.target.value}),required:!0,className:"calendar-input"}),e.jsxs("div",{className:"calendar-client-select",children:[e.jsx("input",{type:"text",placeholder:"Select Client",value:C||s.client,onChange:t=>{S(t.target.value),A(!0),m({...s,client:t.target.value,customerId:""})},onBlur:()=>{setTimeout(()=>A(!1),200),M.find(n=>`${n.firstName} ${n.lastName}`.toLowerCase()===C.toLowerCase())||m(n=>({...n,customerId:""}))},onFocus:()=>A(!0),autoComplete:"off",required:!0,className:"calendar-input"}),P&&T.length>0&&e.jsx("div",{className:"calendar-client-dropdown",children:T.map(t=>e.jsxs("div",{className:"calendar-client-option",onClick:()=>{m({...s,client:`${t.firstName} ${t.lastName}`,customerId:t.id}),S(`${t.firstName} ${t.lastName}`),A(!1)},children:[t.firstName," ",t.lastName," ",t.company?`(${t.company})`:""]},t.id))})]}),e.jsx("input",{type:"date",value:s.date,onChange:t=>m({...s,date:t.target.value}),required:!0,className:"calendar-input"}),e.jsx(V,{label:"Start Time",value:s.time,onChange:t=>m({...s,time:t})}),e.jsx(V,{label:"End Time",value:s.endTime,onChange:t=>m({...s,endTime:t})}),e.jsxs("select",{value:s.category,onChange:t=>m({...s,category:t.target.value}),required:!0,className:"calendar-select",children:[e.jsx("option",{value:"",children:"Select a Category"}),Object.keys(q).map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx(se,{label:"Address/Location",value:s.address,onChange:(t,n)=>{m({...s,address:t,addressMeta:n})},placeholder:"Start typing an Australian addressâ€¦"}),e.jsx("textarea",{placeholder:"Description",value:s.description,onChange:t=>m({...s,description:t.target.value}),className:"calendar-textarea"}),e.jsxs("div",{className:"calendar-form-actions",children:[e.jsx("button",{className:"calendar-btn-main",type:"submit",children:b?"Update Appointment":"Add Appointment"}),e.jsx("button",{className:"calendar-btn-secondary",type:"button",onClick:()=>{N(!1),w(null)},children:"Cancel"}),b&&e.jsx("button",{className:"calendar-btn-delete",type:"button",onClick:()=>_(b),children:"Delete"})]})]})]}),e.jsxs("div",{className:"calendar-section",children:[e.jsxs("div",{className:"calendar-nav-header",children:[e.jsx("button",{onClick:()=>Y(-1),className:"calendar-nav-btn",children:"â€¹ Previous"}),e.jsxs("h3",{className:"calendar-nav-title",children:[x==="monthly"&&new Intl.DateTimeFormat("en-AU",{timeZone:g,month:"long",year:"numeric"}).format(o),x==="weekly"&&`Week of ${new Intl.DateTimeFormat("en-AU",{timeZone:g,month:"short",day:"numeric",year:"numeric"}).format(o)}`,x==="daily"&&new Intl.DateTimeFormat("en-AU",{timeZone:g,weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(o)]}),e.jsx("button",{onClick:()=>Y(1),className:"calendar-nav-btn",children:"Next â€º"}),e.jsxs("div",{className:"calendar-view-switcher",children:[e.jsx("button",{className:`calendar-view-btn${x==="monthly"?" active":""}`,onClick:()=>F("monthly"),type:"button",children:"Monthly"}),e.jsx("button",{className:`calendar-view-btn${x==="weekly"?" active":""}`,onClick:()=>F("weekly"),type:"button",children:"Weekly"}),e.jsx("button",{className:`calendar-view-btn${x==="daily"?" active":""}`,onClick:()=>F("daily"),type:"button",children:"Daily"})]})]}),x==="monthly"&&e.jsx("div",{className:"calendar-monthly-grid",children:Z().map((t,n)=>{const i=B(t),c=t.getMonth()===o.getMonth(),r=t.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`calendar-day ${c?"":"calendar-day-muted"} ${r?"calendar-day-today":""}`,children:[e.jsx("div",{className:"calendar-day-date",children:t.getDate()}),i.filter(a=>{const l=a.time&&a.endTime&&String(a.time).trim()&&String(a.endTime).trim();return console.log("Appointment filter check:",a.id,"hasTime:",l,"time:",a.time,"endTime:",a.endTime),l}).map(a=>{const l=O(a.category);return e.jsxs("div",{className:"calendar-appointment",style:{backgroundColor:l.color,color:l.textColor},onClick:()=>{m(a),w(a.id),N(!0)},children:[e.jsxs("div",{className:"calendar-appointment-time",children:[a.time," - ",a.endTime]}),e.jsx("div",{className:"calendar-appointment-title",children:a.title})]},a.id)})]},n)})}),x==="weekly"&&e.jsxs("div",{className:"calendar-weekly-grid",children:[e.jsxs("div",{className:"calendar-time-slots",children:[e.jsx("div",{className:"calendar-time-slot-header"}),W().map((t,n)=>e.jsx("div",{className:"calendar-time-slot",children:n%4===0?t:""},t))]}),e.jsx("div",{className:"calendar-days-grid",children:Q().map((t,n)=>{const i=B(t),c=t.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`calendar-day ${c?"calendar-day-today":""}`,children:[e.jsx("div",{className:"calendar-day-header",children:t.toLocaleDateString("en-US",{weekday:"short",month:"numeric",day:"numeric"})}),e.jsxs("div",{className:"calendar-day-body",children:[W().map((r,a)=>e.jsx("div",{className:"calendar-time-slot"},r)),i.filter(r=>{const a=r.time&&r.endTime&&String(r.time).trim()&&String(r.endTime).trim();return console.log("Weekly view appointment filter:",r.id,"hasTime:",a,"time:",r.time,"endTime:",r.endTime),a}).map(r=>{const a=O(r.category),[l,y]=r.time.split(":").map(Number),[L,ee]=r.endTime.split(":").map(Number),X=l*60+y,te=L*60+ee,ne=Math.max(30,te-X);return e.jsxs("div",{className:"calendar-appointment",style:{top:`${X}px`,height:`${ne}px`,backgroundColor:a.color,color:a.textColor},onClick:()=>{m(r),w(r.id),N(!0)},children:[e.jsxs("div",{className:"calendar-appointment-time",children:[r.time," - ",r.endTime]}),e.jsx("div",{className:"calendar-appointment-title",children:r.title})]},r.id)})]})]},n)})})]}),x==="daily"&&e.jsxs("div",{className:"calendar-daily-grid",children:[e.jsxs("div",{className:"calendar-time-slots",children:[e.jsx("div",{className:"calendar-time-slot-header"}),W().map((t,n)=>e.jsx("div",{className:"calendar-time-slot",children:n%4===0?t:""},t))]}),e.jsxs("div",{className:"calendar-single-day",children:[e.jsx("div",{className:"calendar-day-header",children:o.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),e.jsxs("div",{className:"calendar-day-body",children:[W().map((t,n)=>e.jsx("div",{className:"calendar-time-slot"},t)),B(o).filter(t=>{const n=t.time&&t.endTime&&String(t.time).trim()&&String(t.endTime).trim();return console.log("Daily view appointment filter:",t.id,"hasTime:",n,"time:",t.time,"endTime:",t.endTime),n}).map(t=>{const n=O(t.category),[i,c]=t.time.split(":").map(Number),[r,a]=t.endTime.split(":").map(Number),l=i*60+c,y=r*60+a,L=Math.max(30,y-l);return e.jsxs("div",{className:"calendar-appointment",style:{top:`${l}px`,height:`${L}px`,backgroundColor:n.color,color:n.textColor},onClick:()=>{m(t),w(t.id),N(!0)},children:[e.jsxs("div",{className:"calendar-appointment-time",children:[t.time," - ",t.endTime]}),e.jsx("div",{className:"calendar-appointment-title",children:t.title}),e.jsx("div",{className:"calendar-appointment-category",children:t.category})]},t.id)})]})]})]})]}),e.jsx(re,{open:U.open,title:"Delete Appointment",message:"Are you sure you want to delete this appointment? This action cannot be undone.",onConfirm:J,onCancel:()=>H({open:!1,id:null})})]}):e.jsx("div",{className:"calendar-container",children:e.jsxs("div",{className:"calendar-card",style:{maxWidth:500,margin:"3rem auto",textAlign:"center"},children:[e.jsx("h1",{className:"calendar-title",children:"ðŸ”’ Calendar Access Required"}),e.jsx("p",{style:{color:"#666",marginBottom:24},children:"Please log in to access the calendar system."}),e.jsx("a",{href:"/login",className:"calendar-btn-main",children:"Go to Login Page"})]})})};export{le as default};
