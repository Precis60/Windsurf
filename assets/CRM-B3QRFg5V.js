import{j as e}from"./index-ChUCjPpE.js";import{b as a}from"./vendor-DIN34KHw.js";import{c as h,b as m}from"./firebaseService-DZryI02G.js";import"./firebase-BVsHjDpH.js";const X=()=>{const[u,v]=a.useState(!1),[p,w]=a.useState({username:"",password:""}),[B,R]=a.useState(""),[E,S]=a.useState([]),[N,x]=a.useState(!1),[y,A]=a.useState(null),[n,l]=a.useState({serviceName:"",username:"",password:"",website:"",notes:""}),[z,T]=a.useState({}),[k,f]=a.useState([]),[P,g]=a.useState(!1),[b,D]=a.useState(!1),[j,C]=a.useState(null),[s,o]=a.useState({companyName:"",contactName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",projectType:"",notes:""}),I=t=>{t.preventDefault(),R("");const r={username:"admin",password:"calendar2025"};p.username===r.username&&p.password===r.password?(v(!0),sessionStorage.setItem("crmAuth","true")):R("Invalid username or password")},L=()=>{v(!1),w({username:"",password:""}),sessionStorage.removeItem("crmAuth")};a.useEffect(()=>{const t=()=>{sessionStorage.removeItem("crmAuth")},r=()=>{document.hidden&&(sessionStorage.removeItem("crmAuth"),v(!1))};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",r),()=>{window.removeEventListener("beforeunload",t),document.removeEventListener("visibilitychange",r),sessionStorage.removeItem("crmAuth")}},[]),a.useEffect(()=>{if(u){(async()=>{try{const i=await h.getAll();S(i)}catch(i){console.error("Error loading credentials:",i);const c=localStorage.getItem("companyCredentials");c&&S(JSON.parse(c))}})();const r=h.onSnapshot(i=>{S(i)});return()=>r()}},[u]);const F=async t=>{t.preventDefault();try{const r={...n,dateAdded:new Date().toLocaleDateString()};await h.add(r),l({serviceName:"",username:"",password:"",website:"",notes:""}),x(!1)}catch(r){console.error("Error adding credential:",r),alert("Failed to add credential. Please try again.")}},q=async t=>{t.preventDefault();try{await h.update(y,n),l({serviceName:"",username:"",password:"",website:"",notes:""}),A(null),x(!1)}catch(r){console.error("Error updating credential:",r),alert("Failed to update credential. Please try again.")}},M=t=>{l({serviceName:t.serviceName,username:t.username,password:t.password,website:t.website,notes:t.notes}),A(t.id),x(!0)},U=async t=>{if(window.confirm("Are you sure you want to delete this credential?"))try{await h.delete(t)}catch(r){console.error("Error deleting credential:",r),alert("Failed to delete credential. Please try again.")}},W=t=>{T(r=>({...r,[t]:!r[t]}))};a.useEffect(()=>{if(u){(async()=>{try{const i=await m.getAll();if(i.length>0)f(i);else{const c=[{companyName:"ABC Manufacturing Corp",contactName:"John Smith",email:"john.smith@abcmfg.com",phone:"(555) 123-4567",address:"123 Industrial Blvd",city:"Manufacturing District",state:"CA",zipCode:"90210",projectType:"Network Infrastructure",notes:"Large manufacturing facility requiring comprehensive network setup",dateAdded:"2025-01-15"},{companyName:"Office Complex LLC",contactName:"Sarah Johnson",email:"sarah@officecomplex.com",phone:"(555) 987-6543",address:"456 Business Park Dr, Suite 200",city:"Business District",state:"CA",zipCode:"90211",projectType:"Cable Installation",notes:"Multi-floor office building with structured cabling needs",dateAdded:"2025-01-10"}];for(const Z of c)await m.add(Z);const V=await m.getAll();f(V)}}catch(i){console.error("Error loading customers:",i);const c=localStorage.getItem("companyCustomers");c&&f(JSON.parse(c))}})();const r=m.onSnapshot(i=>{f(i)});return()=>r()}},[u]);const $=async t=>{t.preventDefault();try{const r={...s,dateAdded:new Date().toLocaleDateString()};await m.add(r),o({companyName:"",contactName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",projectType:"",notes:""}),g(!1)}catch(r){console.error("Error adding customer:",r),alert("Failed to add customer. Please try again.")}},H=async t=>{t.preventDefault();try{await m.update(j,s),o({companyName:"",contactName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",projectType:"",notes:""}),C(null),g(!1)}catch(r){console.error("Error updating customer:",r),alert("Failed to update customer. Please try again.")}},J=t=>{o({companyName:t.companyName,contactName:t.contactName,email:t.email,phone:t.phone,address:t.address,city:t.city,state:t.state,zipCode:t.zipCode,projectType:t.projectType,notes:t.notes}),C(t.id),g(!0)},O=async t=>{if(window.confirm("Are you sure you want to delete this customer?"))try{await m.delete(t)}catch(r){console.error("Error deleting customer:",r),alert("Failed to delete customer. Please try again.")}},d={background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",margin:"0 0.5rem"};return u?e.jsxs("div",{className:"page-content",style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h1",{style:{color:"#22314a",margin:0},children:"Customer Relationship Management"}),e.jsx("button",{onClick:L,style:{...d,background:"#dc3545"},children:"Logout"})]}),e.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem"},children:"Manage customer relationships and track project progress."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"Customer Database"}),e.jsx("p",{children:"View and manage customer information, contact details, and project history."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"1rem"},children:[e.jsx("button",{onClick:()=>{D(!b),g(!1),C(null)},style:{...d,width:"100%",padding:"0.5rem 1rem",fontSize:"0.9rem"},children:b?"Hide Customers":"View Customers"}),e.jsx("button",{onClick:()=>{console.log("Add Customer button clicked"),g(!0),D(!1),C(null),o({companyName:"",contactName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",projectType:"",notes:""})},style:{...d,background:"#28a745",width:"100%",padding:"0.5rem 1rem",fontSize:"0.9rem"},children:"Add Customer"})]})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"Active Projects"}),e.jsxs("ul",{style:{listStyle:"none",padding:0},children:[e.jsx("li",{style:{padding:"0.5rem 0",borderBottom:"1px solid #dee2e6"},children:"Office Building Wiring - 75% Complete"}),e.jsx("li",{style:{padding:"0.5rem 0",borderBottom:"1px solid #dee2e6"},children:"Factory Automation - 40% Complete"}),e.jsx("li",{style:{padding:"0.5rem 0"},children:"Warehouse Network - Planning Phase"})]})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"Recent Activity"}),e.jsxs("ul",{style:{listStyle:"none",padding:0},children:[e.jsx("li",{style:{padding:"0.5rem 0",borderBottom:"1px solid #dee2e6"},children:"New quote sent to ABC Corp"}),e.jsx("li",{style:{padding:"0.5rem 0",borderBottom:"1px solid #dee2e6"},children:"Project milestone reached"}),e.jsx("li",{style:{padding:"0.5rem 0"},children:"Customer feedback received"})]})]})]}),e.jsxs("div",{style:{marginTop:"3rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{color:"#22314a",margin:0},children:"🔐 Company Password Manager"}),e.jsx("button",{onClick:()=>{x(!N),A(null),l({serviceName:"",username:"",password:"",website:"",notes:""})},style:d,children:N?"Cancel":"Add New Credential"})]}),N&&e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef",marginBottom:"2rem"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:y?"Edit Credential":"Add New Credential"}),e.jsxs("form",{onSubmit:y?q:F,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("input",{type:"text",placeholder:"Service/Software Name",value:n.serviceName,onChange:t=>l({...n,serviceName:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"text",placeholder:"Username/Email",value:n.username,onChange:t=>l({...n,username:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"password",placeholder:"Password",value:n.password,onChange:t=>l({...n,password:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"url",placeholder:"Website URL (optional)",value:n.website,onChange:t=>l({...n,website:t.target.value}),style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}})]}),e.jsx("textarea",{placeholder:"Notes (optional)",value:n.notes,onChange:t=>l({...n,notes:t.target.value}),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc",minHeight:"60px",marginBottom:"1rem"}}),e.jsx("button",{type:"submit",style:d,children:y?"Update Credential":"Save Credential"})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1rem"},children:E.length===0?e.jsx("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",textAlign:"center",color:"#666"},children:e.jsx("p",{children:'No credentials saved yet. Click "Add New Credential" to get started.'})}):E.map(t=>e.jsxs("div",{style:{background:"#fff",padding:"1.5rem",borderRadius:"8px",border:"1px solid #dee2e6",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsx("h4",{style:{color:"#22314a",margin:0,fontSize:"1.1rem"},children:t.serviceName}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>M(t),style:{...d,padding:"0.25rem 0.5rem",fontSize:"0.8rem",background:"#28a745"},children:"Edit"}),e.jsx("button",{onClick:()=>U(t.id),style:{...d,padding:"0.25rem 0.5rem",fontSize:"0.8rem",background:"#dc3545"},children:"Delete"})]})]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Username:"})," ",t.username]}),e.jsxs("div",{style:{marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("strong",{children:"Password:"}),e.jsx("span",{style:{fontFamily:"monospace"},children:z[t.id]?t.password:"••••••••"}),e.jsx("button",{onClick:()=>W(t.id),style:{...d,padding:"0.25rem 0.5rem",fontSize:"0.7rem",background:"#6c757d"},children:z[t.id]?"Hide":"Show"})]}),t.website&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Website:"}),e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",style:{color:"#007bff",textDecoration:"none"},children:t.website})]}),t.notes&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Notes:"})," ",t.notes]}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"1rem"},children:["Added: ",t.dateAdded]})]},t.id))})]}),(P||b)&&e.jsxs("div",{style:{marginTop:"3rem"},children:[e.jsx("h2",{style:{color:"#22314a",marginBottom:"1.5rem"},children:"👥 Customer Management"}),P&&e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef",marginBottom:"2rem"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:j?"Edit Customer":"Add New Customer"}),e.jsxs("form",{onSubmit:j?H:$,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsx("input",{type:"text",placeholder:"Company Name",value:s.companyName,onChange:t=>o({...s,companyName:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"text",placeholder:"Contact Name",value:s.contactName,onChange:t=>o({...s,contactName:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"email",placeholder:"Email Address",value:s.email,onChange:t=>o({...s,email:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"tel",placeholder:"Phone Number",value:s.phone,onChange:t=>o({...s,phone:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"text",placeholder:"Street Address",value:s.address,onChange:t=>o({...s,address:t.target.value}),style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"text",placeholder:"City",value:s.city,onChange:t=>o({...s,city:t.target.value}),style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"text",placeholder:"State",value:s.state,onChange:t=>o({...s,state:t.target.value}),style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsx("input",{type:"text",placeholder:"ZIP Code",value:s.zipCode,onChange:t=>o({...s,zipCode:t.target.value}),style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"}}),e.jsxs("select",{value:s.projectType,onChange:t=>o({...s,projectType:t.target.value}),required:!0,style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc"},children:[e.jsx("option",{value:"",children:"Select Project Type"}),e.jsx("option",{value:"Network Infrastructure",children:"Network Infrastructure"}),e.jsx("option",{value:"Cable Installation",children:"Cable Installation"}),e.jsx("option",{value:"Equipment Setup",children:"Equipment Setup"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Consultation",children:"Consultation"}),e.jsx("option",{value:"System Integration",children:"System Integration"}),e.jsx("option",{value:"Upgrade",children:"Upgrade"}),e.jsx("option",{value:"Emergency Service",children:"Emergency Service"})]})]}),e.jsx("textarea",{placeholder:"Notes (optional)",value:s.notes,onChange:t=>o({...s,notes:t.target.value}),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc",minHeight:"80px",marginBottom:"1rem"}}),e.jsx("button",{type:"submit",style:d,children:j?"Update Customer":"Save Customer"})]})]}),b&&e.jsxs("div",{children:[e.jsxs("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:["Customer Database (",k.length," customers)"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"1rem"},children:k.length===0?e.jsx("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",textAlign:"center",color:"#666"},children:e.jsx("p",{children:'No customers added yet. Click "Add Customer" to get started.'})}):k.map(t=>e.jsxs("div",{style:{background:"#fff",padding:"1.5rem",borderRadius:"8px",border:"1px solid #dee2e6",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[e.jsx("h4",{style:{color:"#22314a",margin:0,fontSize:"1.2rem"},children:t.companyName}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>J(t),style:{...d,padding:"0.25rem 0.5rem",fontSize:"0.8rem",background:"#28a745"},children:"Edit"}),e.jsx("button",{onClick:()=>O(t.id),style:{...d,padding:"0.25rem 0.5rem",fontSize:"0.8rem",background:"#dc3545"},children:"Delete"})]})]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Contact:"})," ",t.contactName]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Email:"}),e.jsx("a",{href:`mailto:${t.email}`,style:{color:"#007bff",textDecoration:"none",marginLeft:"0.5rem"},children:t.email})]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Phone:"}),e.jsx("a",{href:`tel:${t.phone}`,style:{color:"#007bff",textDecoration:"none",marginLeft:"0.5rem"},children:t.phone})]}),t.address&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Address:"})," ",t.address,t.city&&`, ${t.city}`,t.state&&`, ${t.state}`,t.zipCode&&` ${t.zipCode}`]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Project Type:"}),e.jsx("span",{style:{background:"#e3f2fd",color:"#1976d2",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.8rem",marginLeft:"0.5rem"},children:t.projectType})]}),t.notes&&e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Notes:"})," ",t.notes]}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"1rem"},children:["Added: ",t.dateAdded]})]},t.id))})]})]})]}):e.jsx("div",{className:"page-content",style:{padding:"2rem",maxWidth:"600px",margin:"0 auto"},children:e.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",textAlign:"center"},children:[e.jsx("h1",{style:{color:"#22314a",marginBottom:"1rem"},children:"CRM Access"}),e.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem",color:"#666"},children:"Please login to access the customer relationship management system."}),e.jsxs("form",{onSubmit:I,style:{maxWidth:"400px",margin:"0 auto"},children:[e.jsx("input",{type:"text",placeholder:"Username",value:p.username,onChange:t=>w({...p,username:t.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",margin:"0.5rem 0",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),e.jsx("input",{type:"password",placeholder:"Password",value:p.password,onChange:t=>w({...p,password:t.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",margin:"0.5rem 0",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),B&&e.jsx("div",{style:{color:"#dc3545",margin:"0.5rem 0",fontSize:"0.9rem"},children:B}),e.jsx("button",{type:"submit",style:{...d,width:"100%",padding:"0.75rem",fontSize:"1rem",marginTop:"1rem"},children:"Login to CRM"})]}),e.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",background:"#e3f2fd",borderRadius:"4px",fontSize:"0.9rem",color:"#1976d2"},children:[e.jsx("strong",{children:"Demo Credentials:"}),e.jsx("br",{}),"Username: admin",e.jsx("br",{}),"Password: calendar2025"]})]})})};export{X as default};
