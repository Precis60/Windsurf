import{a as W,s as q,b as z,j as e}from"./index-CeN_MfnI.js";import{b as o}from"./vendor-DPLMwiL-.js";const P=()=>{const[x,u]=o.useState([]),[T,g]=o.useState(!0),[i,l]=o.useState("tickets"),[h,b]=o.useState([]),[A,y]=o.useState(!1),[I,j]=o.useState(!1),[n,m]=o.useState(null),[s,d]=o.useState({subject:"",description:"",priority:"medium",category:"general"}),f=W.getCurrentUser(),a=f?.role==="admin"||f?.role==="staff";o.useEffect(()=>{v(),a&&c()},[]);const v=async()=>{try{g(!0);const r=await q.getTickets(),t=Array.isArray(r)?r:r.tickets||[];u(t)}catch(r){console.error("Error loading tickets:",r),u([])}finally{g(!1)}},c=async()=>{try{y(!0);const r=await z.getAll("?status=pending"),t=Array.isArray(r)?r:r.requests||[];b(t)}catch(r){console.error("Error loading appointment requests:",r),b([])}finally{y(!1)}},p=async(r,t,R)=>{try{await z.update(r,{status:t,createAppointment:!!R}),await c(),alert(t==="approved"?"Request approved"+(R?" and appointment created.":"."):"Request declined.")}catch(C){console.error("Moderation failed:",C),alert(C?.message||"Failed to update request")}},B=async r=>{r.preventDefault();try{await q.createTicket(s),d({subject:"",description:"",priority:"medium",category:"general"}),j(!1),v()}catch(t){console.error("Error creating ticket:",t),alert("Failed to create ticket. Please try again.")}},k=r=>({open:"#ed8936",in_progress:"#667eea",resolved:"#48bb78",closed:"#a0aec0"})[r]||"#a0aec0",w=r=>({low:"#48bb78",medium:"#ed8936",high:"#f56565",urgent:"#e53e3e"})[r]||"#ed8936",S=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto",minHeight:"80vh"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #9f7aea 0%, #667eea 100%)",color:"white",padding:"30px",borderRadius:"12px",marginBottom:"30px",textAlign:"center"},children:[e.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:"🎧 Support Portal"}),e.jsx("p",{style:{margin:0,fontSize:"18px",opacity:.9},children:"Professional technical support for Precision Cabling & Automation"})]}),e.jsxs("div",{style:{display:"flex",marginBottom:"30px",borderBottom:"2px solid #e1e5e9"},children:[e.jsx("button",{onClick:()=>l("tickets"),style:{padding:"12px 24px",border:"none",background:i==="tickets"?"#9f7aea":"transparent",color:i==="tickets"?"white":"#666",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"500",marginRight:"10px"},children:"📋 Support Tickets"}),e.jsx("button",{onClick:()=>l("submit"),style:{padding:"12px 24px",border:"none",background:i==="submit"?"#9f7aea":"transparent",color:i==="submit"?"white":"#666",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"500",marginRight:"10px"},children:"➕ Submit Request"}),e.jsx("button",{onClick:()=>l("knowledge"),style:{padding:"12px 24px",border:"none",background:i==="knowledge"?"#9f7aea":"transparent",color:i==="knowledge"?"white":"#666",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"500"},children:"📚 Knowledge Base"}),a&&e.jsx("button",{onClick:()=>l("requests"),style:{padding:"12px 24px",border:"none",background:i==="requests"?"#9f7aea":"transparent",color:i==="requests"?"white":"#666",borderRadius:"8px 8px 0 0",cursor:"pointer",fontWeight:"500",marginLeft:"auto"},children:"🗓️ Appointment Requests"})]}),i==="tickets"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{style:{margin:0,color:"#22314a"},children:"Support Tickets"}),e.jsx("button",{onClick:()=>j(!0),style:{background:"#9f7aea",color:"white",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:"+ New Ticket"})]}),T?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#666"},children:"Loading tickets..."}):x.length===0?e.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"12px",textAlign:"center",border:"1px solid #e1e5e9"},children:[e.jsx("h3",{style:{color:"#666",margin:"0 0 10px 0"},children:"No Support Tickets"}),e.jsx("p",{style:{color:"#999",margin:0},children:"Create your first support ticket to get started"})]}):e.jsx("div",{style:{display:"grid",gap:"15px"},children:x.map(r=>e.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"12px",border:"1px solid #e1e5e9",cursor:"pointer",transition:"box-shadow 0.2s"},onClick:()=>m(r),onMouseOver:t=>{t.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseOut:t=>{t.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:"0 0 5px 0",color:"#22314a",fontSize:"18px"},children:["#",r.id," - ",r.subject]}),e.jsxs("p",{style:{margin:0,color:"#666",fontSize:"14px",lineHeight:"1.4"},children:[r.description?.substring(0,100),"..."]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("span",{style:{background:w(r.priority)+"20",color:w(r.priority),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"uppercase"},children:r.priority}),e.jsx("span",{style:{background:k(r.status)+"20",color:k(r.status),padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:r.status.replace("_"," ")})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"#999"},children:[e.jsxs("span",{children:["Category: ",r.category]}),e.jsxs("span",{children:["Created: ",S(r.created_at)]})]})]},r.id))}),a&&i==="requests"&&e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h2",{style:{margin:0,color:"#22314a"},children:"Pending Appointment Requests"}),e.jsx("button",{onClick:c,style:{background:"#9f7aea",color:"white",border:"none",padding:"8px 16px",borderRadius:8,cursor:"pointer"},children:"Refresh"})]}),A?e.jsx("div",{style:{textAlign:"center",padding:20,color:"#666"},children:"Loading requests..."}):h.length===0?e.jsx("div",{style:{background:"white",padding:20,borderRadius:12,border:"1px solid #e1e5e9",textAlign:"center"},children:"No pending requests."}):e.jsx("div",{style:{display:"grid",gap:12},children:h.map(r=>e.jsx("div",{style:{background:"white",padding:16,borderRadius:12,border:"1px solid #e1e5e9"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:r.title}),e.jsx("div",{style:{color:"#666",fontSize:13},children:new Date(r.requestedDate).toLocaleString("en-AU")}),r.address&&e.jsxs("div",{style:{color:"#666",fontSize:13},children:["📍 ",r.address]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>p(r.id,"approved",!0),style:{background:"#4caf50",color:"white",border:"none",padding:"8px 12px",borderRadius:6,cursor:"pointer"},children:"Approve & Create"}),e.jsx("button",{onClick:()=>p(r.id,"approved",!1),style:{background:"#2e7d32",color:"white",border:"none",padding:"8px 12px",borderRadius:6,cursor:"pointer"},children:"Approve Only"}),e.jsx("button",{onClick:()=>p(r.id,"declined",!1),style:{background:"#f44336",color:"white",border:"none",padding:"8px 12px",borderRadius:6,cursor:"pointer"},children:"Decline"})]})]})},r.id))})]})]}),i==="submit"&&e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 20px 0",color:"#22314a"},children:"Submit Support Request"}),e.jsxs("div",{style:{background:"white",padding:"30px",borderRadius:"12px",border:"1px solid #e1e5e9",marginBottom:"30px"},children:[e.jsx("h3",{style:{margin:"0 0 20px 0",color:"#22314a"},children:"🌐 Public Support Request Form"}),e.jsx("p",{style:{margin:"0 0 20px 0",color:"#666"},children:"Share this link with clients to submit support requests:"}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",border:"1px solid #e1e5e9",marginBottom:"20px"},children:[e.jsx("code",{style:{color:"#9f7aea",fontSize:"14px",wordBreak:"break-all"},children:"https://precis60.github.io/Windsurf/support-request"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText("https://precis60.github.io/Windsurf/support-request"),alert("Link copied to clipboard!")},style:{background:"#9f7aea",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",marginLeft:"10px",cursor:"pointer",fontSize:"12px"},children:"📋 Copy Link"})]})]}),e.jsxs("div",{style:{background:"white",padding:"30px",borderRadius:"12px",border:"1px solid #e1e5e9"},children:[e.jsx("h3",{style:{margin:"0 0 20px 0",color:"#22314a"},children:"🔒 Internal Support Request"}),e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#22314a",fontWeight:"500"},children:"Subject *"}),e.jsx("input",{type:"text",value:s.subject,onChange:r=>d({...s,subject:r.target.value}),required:!0,style:{width:"100%",padding:"12px",border:"2px solid #e1e5e9",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},placeholder:"Brief description of the issue"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#22314a",fontWeight:"500"},children:"Description *"}),e.jsx("textarea",{value:s.description,onChange:r=>d({...s,description:r.target.value}),required:!0,rows:5,style:{width:"100%",padding:"12px",border:"2px solid #e1e5e9",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box",resize:"vertical"},placeholder:"Detailed description of the issue, steps to reproduce, expected behavior, etc."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#22314a",fontWeight:"500"},children:"Priority"}),e.jsxs("select",{value:s.priority,onChange:r=>d({...s,priority:r.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #e1e5e9",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",color:"#22314a",fontWeight:"500"},children:"Category"}),e.jsxs("select",{value:s.category,onChange:r=>d({...s,category:r.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #e1e5e9",borderRadius:"8px",fontSize:"16px",boxSizing:"border-box"},children:[e.jsx("option",{value:"technical",children:"Technical Issue"}),e.jsx("option",{value:"billing",children:"Billing"}),e.jsx("option",{value:"general",children:"General Inquiry"}),e.jsx("option",{value:"feature_request",children:"Feature Request"})]})]})]}),e.jsx("button",{type:"submit",style:{background:"#9f7aea",color:"white",border:"none",padding:"14px 28px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"background-color 0.3s"},onMouseOver:r=>r.target.style.background="#8b5cf6",onMouseOut:r=>r.target.style.background="#9f7aea",children:"🎫 Submit Support Ticket"})]})]})]}),i==="knowledge"&&e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 20px 0",color:"#22314a"},children:"Knowledge Base"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",border:"1px solid #e1e5e9"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",color:"#22314a"},children:"❓ Frequently Asked Questions"}),e.jsxs("div",{style:{fontSize:"14px",color:"#666",lineHeight:"1.6"},children:[e.jsx("p",{children:e.jsx("strong",{children:"Q: How do I schedule a service appointment?"})}),e.jsx("p",{children:"A: Use our Calendar system to book appointments or contact us directly."}),e.jsx("p",{children:e.jsx("strong",{children:"Q: What services do you provide?"})}),e.jsx("p",{children:"A: We specialize in network cabling, security systems, and automation solutions."}),e.jsx("p",{children:e.jsx("strong",{children:"Q: How long does installation take?"})}),e.jsx("p",{children:"A: Installation time varies by project size. We'll provide estimates during consultation."})]})]}),e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",border:"1px solid #e1e5e9"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",color:"#22314a"},children:"📞 Contact Information"}),e.jsxs("div",{style:{fontSize:"14px",color:"#666",lineHeight:"1.8"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," 0413 729 663"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," support@precisioncabling.com"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hours:"})," Mon-Fri 8AM-6PM"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emergency:"})," 24/7 for critical issues"]})]})]}),e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",border:"1px solid #e1e5e9"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",color:"#22314a"},children:"🗺️ Service Areas"}),e.jsxs("div",{style:{fontSize:"14px",color:"#666",lineHeight:"1.6"},children:[e.jsx("p",{children:"We provide services throughout:"}),e.jsxs("ul",{style:{margin:"10px 0",paddingLeft:"20px"},children:[e.jsx("li",{children:"Greater Sydney Area"}),e.jsx("li",{children:"Central Coast"}),e.jsx("li",{children:"Newcastle Region"}),e.jsx("li",{children:"Wollongong Area"})]})]})]}),e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",border:"1px solid #e1e5e9"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",color:"#22314a"},children:"⏱️ Response Times"}),e.jsxs("div",{style:{fontSize:"14px",color:"#666",lineHeight:"1.8"},children:[e.jsxs("p",{children:[e.jsx("span",{style:{color:"#e53e3e"},children:"🔴 Urgent:"})," 2 hours"]}),e.jsxs("p",{children:[e.jsx("span",{style:{color:"#f56565"},children:"🟠 High:"})," 4 hours"]}),e.jsxs("p",{children:[e.jsx("span",{style:{color:"#ed8936"},children:"🟡 Medium:"})," 24 hours"]}),e.jsxs("p",{children:[e.jsx("span",{style:{color:"#48bb78"},children:"🟢 Low:"})," 48 hours"]})]})]})]})]}),n&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",padding:"30px",borderRadius:"12px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[e.jsxs("h2",{style:{margin:0,color:"#22314a"},children:["Ticket #",n.id]}),e.jsx("button",{onClick:()=>m(null),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#999"},children:"×"})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 10px 0",color:"#22314a"},children:n.subject}),e.jsx("p",{style:{margin:0,color:"#666",lineHeight:"1.6"},children:n.description})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",padding:"20px",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",n.status]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Priority:"})," ",n.priority]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Category:"})," ",n.category]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",S(n.created_at)]})]})]})})]})};export{P as default};
