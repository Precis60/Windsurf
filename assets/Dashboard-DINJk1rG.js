import{a as R,b as T,c as D,p as M,s as L,j as e}from"./index-yJda3Uhu.js";import{b as o,L as i}from"./vendor-DR4o8xae.js";const _=()=>{const[v,w]=o.useState(null),[a,h]=o.useState({appointments:0,customers:0,projects:0,tickets:0}),[s,A]=o.useState({appointments:[],customers:[],projects:[],tickets:[]}),[l,m]=o.useState(!0);o.useEffect(()=>{const t=R.getCurrentUser();w(t),z()},[]);const z=async()=>{try{m(!0);const[t,r,n,u]=await Promise.allSettled([T.getAll(),D.getAll(),M.getAll(),L.getTickets()]),p=t.status==="fulfilled"?t.value:[],y=Array.isArray(p)?p:p.appointments||[],d=r.status==="fulfilled"?r.value:[],f=Array.isArray(d)?d:d.customers||[],x=n.status==="fulfilled"?n.value:[],j=Array.isArray(x)?x:x.projects||[],g=u.status==="fulfilled"?u.value:[],b=Array.isArray(g)?g:g.tickets||[];h({appointments:y.length,customers:f.length,projects:j.length,tickets:b.filter(S=>S.status==="open"||S.status==="in_progress").length}),A({appointments:y.slice(0,3),customers:f.slice(0,3),projects:j.slice(0,3),tickets:b.slice(0,3)})}catch(t){console.error("Error loading dashboard data:",t),h({appointments:0,customers:0,projects:0,tickets:0})}finally{m(!1)}},k=[{title:"Calendar",description:"Manage appointments and scheduling",icon:"ðŸ“…",path:"/calendar",color:"#667eea"},{title:"CRM",description:"Customer relationship management",icon:"ðŸ‘¥",path:"/crm",color:"#48bb78"},{title:"Support Portal",description:"Handle customer support tickets",icon:"ðŸŽ§",path:"/support-portal",color:"#ed8936"},{title:"Business Portal",description:"Access business tools and reports",icon:"ðŸ“Š",path:"/portal",color:"#9f7aea"}],c=(()=>{const t=[];return s.appointments.forEach(r=>{t.push({type:"appointment",message:`Appointment: ${r.title||"New appointment scheduled"}`,time:r.created_at?new Date(r.created_at).toLocaleDateString():"Recently",icon:"ðŸ“…",color:"#667eea"})}),s.customers.forEach(r=>{t.push({type:"customer",message:`New customer: ${r.first_name} ${r.last_name}`,time:r.created_at?new Date(r.created_at).toLocaleDateString():"Recently",icon:"ðŸ‘¥",color:"#48bb78"})}),s.projects.forEach(r=>{t.push({type:"project",message:`Project: ${r.name||"New project created"}`,time:r.created_at?new Date(r.created_at).toLocaleDateString():"Recently",icon:"ðŸ”§",color:"#ed8936"})}),s.tickets.forEach(r=>{t.push({type:"ticket",message:`Support: ${r.subject||"New support ticket"}`,time:r.created_at?new Date(r.created_at).toLocaleDateString():"Recently",icon:"ðŸŽ§",color:"#9f7aea"})}),t.slice(0,6)})();return e.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto",minHeight:"80vh"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"30px",borderRadius:"12px",marginBottom:"30px",textAlign:"center"},children:[e.jsxs("h1",{style:{margin:"0 0 10px 0",fontSize:"32px",fontWeight:"600"},children:["Welcome back, ",v?.first_name||"Admin","! ðŸ‘‹"]}),e.jsx("p",{style:{margin:0,fontSize:"18px",opacity:.9},children:"ðŸ”’ Secure Business Management Dashboard"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsx(i,{to:"/calendar",style:{textDecoration:"none",color:"inherit"},children:e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"ðŸ“…"}),e.jsx("h3",{style:{margin:0,color:"#22314a"},children:"Appointments"})]}),e.jsx("span",{style:{fontSize:"12px",color:"#667eea",fontWeight:"500"},children:"MANAGE â†’"})]}),e.jsx("p",{style:{fontSize:"28px",fontWeight:"bold",margin:"0 0 5px 0",color:"#667eea"},children:l?"...":a.appointments}),e.jsx("p",{style:{margin:"0 0 10px 0",color:"#666",fontSize:"14px"},children:"Total scheduled"}),s.appointments.length>0&&e.jsxs("div",{style:{fontSize:"12px",color:"#999"},children:["Latest: ",s.appointments[0].title||"Recent appointment"]})]})}),e.jsx(i,{to:"/crm",style:{textDecoration:"none",color:"inherit"},children:e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"ðŸ‘¥"}),e.jsx("h3",{style:{margin:0,color:"#22314a"},children:"Customers"})]}),e.jsx("span",{style:{fontSize:"12px",color:"#48bb78",fontWeight:"500"},children:"MANAGE â†’"})]}),e.jsx("p",{style:{fontSize:"28px",fontWeight:"bold",margin:"0 0 5px 0",color:"#48bb78"},children:l?"...":a.customers}),e.jsx("p",{style:{margin:"0 0 10px 0",color:"#666",fontSize:"14px"},children:"Total customers"}),s.customers.length>0&&e.jsxs("div",{style:{fontSize:"12px",color:"#999"},children:["Latest: ",s.customers[0].first_name||"Recent customer"]})]})}),e.jsx(i,{to:"/portal",style:{textDecoration:"none",color:"inherit"},children:e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"ðŸ”§"}),e.jsx("h3",{style:{margin:0,color:"#22314a"},children:"Projects"})]}),e.jsx("span",{style:{fontSize:"12px",color:"#ed8936",fontWeight:"500"},children:"MANAGE â†’"})]}),e.jsx("p",{style:{fontSize:"28px",fontWeight:"bold",margin:"0 0 5px 0",color:"#ed8936"},children:l?"...":a.projects}),e.jsx("p",{style:{margin:"0 0 10px 0",color:"#666",fontSize:"14px"},children:"Active projects"}),s.projects.length>0&&e.jsxs("div",{style:{fontSize:"12px",color:"#999"},children:["Latest: ",s.projects[0].name||"Recent project"]})]})}),e.jsx(i,{to:"/support-portal",style:{textDecoration:"none",color:"inherit"},children:e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"24px",marginRight:"12px"},children:"ðŸŽ§"}),e.jsx("h3",{style:{margin:0,color:"#22314a"},children:"Support Tickets"})]}),e.jsx("span",{style:{fontSize:"12px",color:"#9f7aea",fontWeight:"500"},children:"MANAGE â†’"})]}),e.jsx("p",{style:{fontSize:"28px",fontWeight:"bold",margin:"0 0 5px 0",color:"#9f7aea"},children:l?"...":a.tickets}),e.jsx("p",{style:{margin:"0 0 10px 0",color:"#666",fontSize:"14px"},children:"Open tickets"}),s.tickets.length>0&&e.jsxs("div",{style:{fontSize:"12px",color:"#999"},children:["Latest: ",s.tickets[0].subject||"Recent ticket"]})]})})]}),e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsx("h2",{style:{color:"#22314a",marginBottom:"20px",fontSize:"24px"},children:"Quick Actions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:k.map((t,r)=>e.jsx(i,{to:t.path,style:{textDecoration:"none",color:"inherit"},children:e.jsxs("div",{style:{background:"white",padding:"25px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseOver:n=>{n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseOut:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:[e.jsx("span",{style:{fontSize:"28px",marginRight:"15px",background:t.color+"20",padding:"10px",borderRadius:"8px"},children:t.icon}),e.jsx("h3",{style:{margin:0,color:t.color,fontSize:"20px"},children:t.title})]}),e.jsx("p",{style:{margin:0,color:"#666",fontSize:"14px",lineHeight:"1.5"},children:t.description})]})},r))})]}),e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#22314a",marginBottom:"20px",fontSize:"24px"},children:"Recent Activity"}),e.jsx("div",{style:{background:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",overflow:"hidden"},children:c.length>0?c.map((t,r)=>e.jsxs("div",{style:{padding:"20px",borderBottom:r<c.length-1?"1px solid #f0f0f0":"none",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:t.color+"20",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px"},children:e.jsx("span",{style:{fontSize:"14px"},children:t.icon})}),e.jsx("span",{style:{color:"#22314a",fontSize:"14px"},children:t.message})]}),e.jsx("span",{style:{color:"#999",fontSize:"12px"},children:t.time})]},r)):e.jsxs("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:[e.jsx("p",{style:{margin:0,fontSize:"16px"},children:"ðŸ“Š No recent activity yet"}),e.jsx("p",{style:{margin:"10px 0 0 0",fontSize:"14px"},children:"Start by creating appointments, adding customers, or managing projects"})]})})]}),e.jsx("div",{style:{background:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"12px",padding:"20px",marginTop:"30px",textAlign:"center"},children:e.jsxs("p",{style:{margin:0,color:"#2e7d32",fontSize:"14px"},children:["ðŸ”’ ",e.jsx("strong",{children:"Enterprise Security Active:"})," Your data is encrypted and secure. Session expires in 24 hours for security."]})})]})};export{_ as default};
