import{a as c,b as k,j as e}from"./index-D0ys-dNt.js";import{b as s,L as a}from"./vendor-Dd4J3GVN.js";const S=()=>{const[f,m]=s.useState(!1),[y,b]=s.useState(!0),[j,u]=s.useState(!1),[r,n]=s.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[d,l]=s.useState({type:"",text:""}),[g,x]=s.useState(0),w=async t=>{if(t.preventDefault(),l({type:"",text:""}),r.password!==r.confirmPassword){l({type:"error",text:"Passwords do not match."});return}try{await c.register({firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password}),l({type:"success",text:"Registration successful! You can now log in."}),n({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),u(!1),setTimeout(()=>{window.location.href="/login"},2e3)}catch(o){l({type:"error",text:o.message||"Registration failed. Please try again."})}};s.useEffect(()=>{(()=>{const o=c.isAuthenticated();m(o),b(!1)})();try{const o=c.getCurrentUser?.();o&&(o.role==="admin"||o.role==="staff")&&k.getAll("?status=pending").then(p=>{const v=Array.isArray(p)?p:p.requests||[];x(v.length||0)}).catch(()=>x(0))}catch{}},[]);const i={padding:"10px",borderRadius:"4px",border:"1px solid #ccc",width:"100%",boxSizing:"border-box"},h={background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",margin:"0 0.5rem"};return y?e.jsx("div",{className:"page-content",style:{padding:"2rem",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"},children:e.jsxs("div",{style:{textAlign:"center",color:"#666"},children:[e.jsx("h2",{children:"Loading Portal..."}),e.jsx("p",{children:"Please wait while we load your portal data."})]})}):f?e.jsxs("div",{className:"page-content",style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsxs("h1",{style:{color:"#22314a",margin:0,display:"flex",alignItems:"center",gap:8},children:["Company Portal",g>0&&e.jsx("span",{style:{background:"#e11d48",color:"#fff",borderRadius:999,padding:"2px 8px",fontSize:12},title:"Pending appointment requests",children:g})]}),e.jsx("button",{onClick:()=>{c.logout(),m(!1),window.location.href="/"},style:{...h,background:"#dc3545"},children:"Logout"})]}),e.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem"},children:"Internal tools for staff and administrators: projects, calendar, tickets, and more."}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"ðŸ“… Calendar Management"}),e.jsx("p",{children:"Manage appointments, view schedules, and approve client requests."}),e.jsx(a,{to:"/calendar",style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem",textDecoration:"none",display:"inline-block"},children:"Open Calendar"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"ðŸ‘¥ Customer Management"}),e.jsx("p",{children:"Manage customer records, contacts, and relationship data."}),e.jsx(a,{to:"/crm",style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem",textDecoration:"none",display:"inline-block"},children:"Open CRM"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"ðŸ”’ Security Control"}),e.jsx("p",{children:"Arm and disarm security areas, monitor alarm status."}),e.jsx(a,{to:"/security",style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem",textDecoration:"none",display:"inline-block"},children:"Security System"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"ðŸŽ§ Support Center"}),e.jsx("p",{children:"Manage support tickets and moderate appointment requests."}),e.jsx(a,{to:"/support-portal",style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem",textDecoration:"none",display:"inline-block"},children:"Open Support"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"ðŸ“Š Dashboard"}),e.jsx("p",{children:"View analytics, reports, and business overview."}),e.jsx(a,{to:"/dashboard",style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem",textDecoration:"none",display:"inline-block"},children:"Open Dashboard"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"ï¿½ Projects"}),e.jsx("p",{children:"Manage ongoing projects, track progress, and handle resources."}),e.jsx(a,{to:"/projects",style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem",textDecoration:"none",display:"inline-block"},children:"Manage Projects"})]}),e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:"ï¿½ðŸ‘¤ Client Portal Access"}),e.jsx("p",{children:"View the client-facing portal (for testing or support)."}),e.jsx(a,{to:"/client-portal",style:{background:"#667eea",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer",marginTop:"1rem",textDecoration:"none",display:"inline-block"},children:"View Client Portal"})]})]})]}):e.jsxs("div",{className:"page-content",style:{padding:"2rem",maxWidth:"600px",margin:"0 auto"},children:[e.jsxs("div",{style:{background:"#f8f9fa",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",textAlign:"center"},children:[e.jsx("h1",{style:{color:"#22314a",marginBottom:"1rem"},children:"ðŸ”’ Portal Access Required"}),e.jsx("p",{style:{marginBottom:"2rem",fontSize:"1.1rem",color:"#666"},children:"Please log in to access the secure business portal system."}),e.jsx("div",{style:{background:"#e8f5e8",border:"1px solid #4caf50",borderRadius:"8px",padding:"20px",marginBottom:"20px"},children:e.jsxs("p",{style:{margin:0,color:"#2e7d32",fontSize:"14px"},children:["ðŸ” ",e.jsx("strong",{children:"Secure Access:"})," This portal contains sensitive business information and requires authentication."]})}),e.jsx("a",{href:"/login",style:{background:"#22314a",color:"white",padding:"12px 24px",borderRadius:"8px",textDecoration:"none",fontSize:"16px",fontWeight:"500",display:"inline-block"},children:"Go to Login Page"}),e.jsx("div",{style:{marginTop:"2rem",fontSize:"14px"},children:e.jsxs("p",{children:["Don't have an account? ",e.jsx("span",{onClick:()=>u(!0),style:{color:"#007bff",cursor:"pointer",textDecoration:"underline"},children:"Create one here"}),"."]})})]}),j&&e.jsxs("div",{style:{background:"#fff",padding:"2rem",borderRadius:"8px",border:"1px solid #e9ecef",marginTop:"2rem"},children:[e.jsx("h2",{style:{color:"#22314a",marginBottom:"1.5rem",textAlign:"center"},children:"Create New Account"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsx("input",{type:"text",placeholder:"First Name",value:r.firstName,onChange:t=>n({...r,firstName:t.target.value}),required:!0,style:i}),e.jsx("input",{type:"text",placeholder:"Last Name",value:r.lastName,onChange:t=>n({...r,lastName:t.target.value}),required:!0,style:i})]}),e.jsx("input",{type:"email",placeholder:"Email Address",value:r.email,onChange:t=>n({...r,email:t.target.value}),required:!0,style:{...i,width:"calc(100% - 20px)",marginTop:"1rem"}}),e.jsx("input",{type:"password",placeholder:"Password (min 8 characters)",value:r.password,onChange:t=>n({...r,password:t.target.value}),required:!0,style:{...i,width:"calc(100% - 20px)",marginTop:"1rem"}}),e.jsx("input",{type:"password",placeholder:"Confirm Password",value:r.confirmPassword,onChange:t=>n({...r,confirmPassword:t.target.value}),required:!0,style:{...i,width:"calc(100% - 20px)",marginTop:"1rem"}}),d.text&&e.jsx("div",{style:{marginTop:"1rem",padding:"10px",borderRadius:"4px",backgroundColor:d.type==="error"?"#f8d7da":"#d4edda",color:d.type==="error"?"#721c24":"#155724"},children:d.text}),e.jsx("button",{type:"submit",style:{...h,width:"100%",marginTop:"1.5rem"},children:"Create Account"})]})]})]})};export{S as default};
