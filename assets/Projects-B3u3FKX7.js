import{j as e,p as k}from"./index-DEqkr8Xv.js";import{u as P,b as d}from"./vendor-fHjEb_wq.js";const p=[{id:"security",name:"Security",icon:"ðŸ”’"},{id:"access-control",name:"Access Control",icon:"ðŸ”‘"},{id:"it",name:"Information Technology",icon:"ðŸ’»"},{id:"cctv",name:"CCTV",icon:"ðŸ“¹"},{id:"consultation",name:"Consultation",icon:"ðŸ“‹"},{id:"maintenance",name:"Routine Maintenance",icon:"ðŸ”§"},{id:"av",name:"Audio Visual",icon:"ðŸŽµ"},{id:"automation",name:"Automation",icon:"ðŸ¤–"},{id:"network",name:"Network Programming",icon:"ðŸŒ"},{id:"electrical",name:"Electrical Works",icon:"âš¡"},{id:"contractor",name:"Contractor",icon:"ðŸ‘·"},{id:"garden",name:"Garden Works",icon:"ðŸŒ¿"},{id:"lighting",name:"Electrical & Lighting",icon:"ðŸ’¡"}],v=["Pending","In Progress","Completed"],y=[{id:1,name:"Office Security System",description:"Complete security system installation for main office building",status:"In Progress",category:"security",tasks:[{id:1,name:"Initial Survey",status:"Completed"},{id:2,name:"System Design",status:"Completed"},{id:3,name:"Installation",status:"In Progress"},{id:4,name:"Configuration",status:"Pending"},{id:5,name:"Client Training",status:"Pending"}]},{id:2,name:"Card Access System",description:"Installing card readers and access control systems",status:"Planning",category:"access-control",tasks:[{id:1,name:"Requirement Analysis",status:"Completed"},{id:2,name:"Hardware Procurement",status:"In Progress"},{id:3,name:"Installation",status:"Pending"},{id:4,name:"Software Setup",status:"Pending"},{id:5,name:"Testing",status:"Pending"}]}],w=({status:s,onUpdate:a})=>{const n=o=>{a(o.target.value)},l=()=>{switch(s){case"Completed":return"#198754";case"In Progress":return"#0d6efd";default:return"#6c757d"}};return e.jsx("select",{value:s,onChange:n,style:{background:l(),color:"white",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",cursor:"pointer"},children:v.map(o=>e.jsx("option",{value:o,style:{backgroundColor:"#fff",color:"#000"},children:o},o))})},S=({tasks:s})=>{const a=s.filter(o=>o.status==="Completed").length,n=s.length,l=n>0?a/n*100:0;return e.jsx("div",{style:{width:"100%",backgroundColor:"#e9ecef",borderRadius:"4px",overflow:"hidden",marginBottom:"1rem"},children:e.jsx("div",{style:{width:`${l}%`,backgroundColor:"#198754",height:"10px",transition:"width 0.3s ease-in-out"}})})},T=()=>{const s=P(),[a,n]=d.useState([]),[l,o]=d.useState(!0),[x,j]=d.useState(null),[i,f]=d.useState("all"),[m,b]=d.useState("");d.useEffect(()=>{(async()=>{try{const r=await k.getAll();r&&Array.isArray(r)?n(r):n(y)}catch(r){console.error("Failed to load projects, using test data as fallback.",r),j("Could not load projects. Displaying sample data."),n(y)}finally{o(!1)}})()},[]);const C=(t,r,u)=>{n(a.map(c=>c.id===t?{...c,tasks:c.tasks.map(g=>g.id===r?{...g,status:u}:g)}:c))};if(l)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",fontSize:"1.2rem",color:"#22314a"},children:"Loading projects..."});if(x)return e.jsxs("div",{style:{padding:"2rem",color:"#dc3545",textAlign:"center"},children:["Error: ",x]});const h=a.filter(t=>(i==="all"||t.category===i)&&(t.name.toLowerCase().includes(m.toLowerCase())||t.description.toLowerCase().includes(m.toLowerCase())));return e.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{color:"#22314a",margin:0},children:"Projects"}),e.jsx("button",{onClick:()=>s("/projects/new"),style:{background:"#22314a",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"4px",cursor:"pointer"},children:"New Project"})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("input",{type:"text",placeholder:"Search projects...",value:m,onChange:t=>b(t.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"1rem"}}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",marginBottom:"1rem"},children:[e.jsx("button",{onClick:()=>f("all"),style:{background:i==="all"?"#22314a":"#f8f9fa",color:i==="all"?"white":"#22314a",border:"1px solid #22314a",padding:"0.5rem 1rem",borderRadius:"999px",cursor:"pointer",fontSize:"0.875rem"},children:"All Projects"}),p.map(t=>e.jsxs("button",{onClick:()=>f(t.id),style:{background:i===t.id?"#22314a":"#f8f9fa",color:i===t.id?"white":"#22314a",border:"1px solid #22314a",padding:"0.5rem 1rem",borderRadius:"999px",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{children:t.icon}),t.name]},t.id))]})]}),h.length>0?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"2rem"},children:h.map(t=>e.jsxs("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{children:p.find(r=>r.id===t.category)?.icon}),e.jsx("span",{style:{background:"#e9ecef",color:"#6c757d",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem"},children:p.find(r=>r.id===t.category)?.name})]}),e.jsx("h3",{style:{color:"#22314a",marginBottom:"1rem"},children:t.name}),e.jsx("p",{style:{color:"#6c757d",marginBottom:"1rem"},children:t.description}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("h4",{style:{color:"#22314a",marginBottom:"0.5rem"},children:"Project Progress"}),e.jsx(S,{tasks:t.tasks}),e.jsx("h4",{style:{color:"#22314a",marginBottom:"0.5rem"},children:"Tasks"}),t.tasks.map(r=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[e.jsx("span",{children:r.name}),e.jsx(w,{status:r.status,onUpdate:u=>C(t.id,r.id,u)})]},r.id))]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{background:I(t.status),color:"white",padding:"0.25rem 0.75rem",borderRadius:"999px",fontSize:"0.875rem"},children:t.status}),e.jsx("button",{onClick:()=>s(`/projects/${t.id}`),style:{background:"none",border:"1px solid #22314a",color:"#22314a",padding:"0.5rem 1rem",borderRadius:"4px",cursor:"pointer"},children:"View Details"})]})]},t.id))}):e.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"8px",color:"#6c757d"},children:[e.jsx("h3",{children:"No projects found"}),e.jsx("p",{children:"Start by creating a new project or try a different search."})]})]})},I=s=>({"In Progress":"#0d6efd",Completed:"#198754","On Hold":"#ffc107",Cancelled:"#dc3545",Planning:"#6c757d"})[s]||"#6c757d";export{T as default};
