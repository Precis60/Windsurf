import{j as t,a as D,b as y,c as x,d as ye,e as ge}from"./index-63nmVOK0.js";import{b as c}from"./vendor-Dd4J3GVN.js";import{A as _,a as xe}from"./AddressAutocomplete--ZYLmjFt.js";const fe=({open:u,title:N,message:k,onConfirm:U,onCancel:R})=>u?t.jsx("div",{className:"custom-modal-overlay",children:t.jsxs("div",{className:"custom-modal",children:[t.jsx("h3",{className:"custom-modal-title",children:N}),t.jsx("div",{className:"custom-modal-message",children:k}),t.jsxs("div",{className:"custom-modal-actions",children:[t.jsx("button",{className:"custom-modal-btn confirm",onClick:U,children:"Yes, Delete"}),t.jsx("button",{className:"custom-modal-btn cancel",onClick:R,children:"Cancel"})]})]})}):null,ee={"Personal Calendar":{color:"#F8C8DC",textColor:"#22314a"},"Business Calendar":{color:"#CDEAC0",textColor:"#22314a"},"Kids Sports & Events":{color:"#FDE2A7",textColor:"#22314a"},"Personal Sports & Events":{color:"#FFCFD2",textColor:"#22314a"},"Centre Com Computers":{color:"#D7C0FD",textColor:"#22314a"},Commerical:{color:"#C7D2FE",textColor:"#22314a"},"Daniel Allison":{color:"#BDE0FE",textColor:"#22314a"},"Jaki Lew":{color:"#CAF0F8",textColor:"#22314a"},"Krongold Family":{color:"#B8E0D2",textColor:"#22314a"},"Krongold Group":{color:"#FFE5B4",textColor:"#22314a"},"Office & Administration":{color:"#E3F2C1",textColor:"#22314a"},"Peter & Alla Lew":{color:"#F9E2AF",textColor:"#22314a"},"Remote Programming":{color:"#E4C1F9",textColor:"#22314a"},Residential:{color:"#F1F0FF",textColor:"#22314a"},"Rosie Lew":{color:"#FFD6E0",textColor:"#22314a"},"Stevie Lew":{color:"#FFEDC2",textColor:"#22314a"},"Supply & Demand":{color:"#D0F4DE",textColor:"#22314a"},"Training & Research":{color:"#C9E4DE",textColor:"#22314a"},"Travel Time":{color:"#EAD7BB",textColor:"#22314a"},"Website & Marketing":{color:"#E0E0E0",textColor:"#22314a"},"Precision Home Education":{color:"#CFE1F2",textColor:"#22314a"}},T=u=>ee[u]||{color:"#E0E0E0",textColor:"#000"},Ne=()=>{const u="Australia/Sydney",[N,k]=c.useState(!1),[U,R]=c.useState(!0),[h,M]=c.useState("monthly"),[te,v]=c.useState([]),[ae,j]=c.useState([]),[V,F]=c.useState(null),[B,A]=c.useState(!1),[C,$]=c.useState(null),[m,Y]=c.useState(new Date),[I,g]=c.useState([]),[ne,E]=c.useState(!1),[i,p]=c.useState({title:"",date:"",time:"",endTime:"",client:"",customerId:"",description:"",category:"",address:"",addressMeta:null}),[K,W]=c.useState(""),[se,L]=c.useState(!1),G=ae.filter(e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(K.toLowerCase()));c.useEffect(()=>{(()=>{const a=D.isAuthenticated();k(a),R(!1)})()},[]);const w=e=>{if(!e.appointmentDate)return e;const a=new Date(e.appointmentDate),r=new Intl.DateTimeFormat("en-CA",{timeZone:u,year:"numeric",month:"2-digit",day:"2-digit"}).format(a),o=new Intl.DateTimeFormat("en-AU",{timeZone:u,hour:"2-digit",minute:"2-digit",hour12:!1}).format(a);let n=o;if(e.durationMinutes){const s=new Date(a.getTime()+e.durationMinutes*6e4);n=new Intl.DateTimeFormat("en-AU",{timeZone:u,hour:"2-digit",minute:"2-digit",hour12:!1}).format(s)}return{...e,time:o,endTime:n,date:r,appointmentDate:e.appointmentDate}};c.useEffect(()=>{N&&(async()=>{F(null);try{const a=await x.getAll(),o=(Array.isArray(a)?a:a.appointments||[]).map(w);v(o)}catch(a){console.error("Error loading appointments:",a),v([]);const r=a?.status===401?"Your session has expired. Please log in again to view appointments.":a?.message||"Failed to load appointments.";F({type:"error",message:r})}try{const a=await ye.getCalendarCustomers(),r=Array.isArray(a)?a:a.customers||[];j(r)}catch(a){if(console.error("Error loading customers (calendar endpoint):",a),a?.status===403)try{const r=await ge.getAll(),o=Array.isArray(r)?r:r.customers||[];j(o)}catch(r){console.error("Fallback customers load failed:",r),j([]);const o=D.getCurrentUser?.();(!o||o.role!=="admin"&&o.role!=="staff")&&F({type:"error",message:"You are logged in without admin/staff permissions. Customer list is hidden. Appointments can still be created by typing a client name, but dropdown requires admin/staff."})}else a?.status===401?(j([]),F({type:"error",message:"Your session has expired. Please log in again to load customers."})):j([])}try{const a=D.getCurrentUser?.();if(a&&(a.role==="admin"||a.role==="staff")){E(!0);const r=await y.getAll("?status=pending"),o=Array.isArray(r)?r:r.requests||[];g(o)}else g([])}catch(a){console.error("Error loading pending requests:",a),g([])}finally{E(!1)}})()},[N]),c.useEffect(()=>{const e=D.getCurrentUser?.();if(!(e&&(e.role==="admin"||e.role==="staff")))return;const a=setInterval(async()=>{try{const r=await y.getAll("?status=pending"),o=Array.isArray(r)?r:r.requests||[];g(o)}catch{}},6e4);return()=>clearInterval(a)},[]);const re=async e=>{e.preventDefault(),console.log("Attempting to create appointment with data:",i);const a=J(i.time,i.endTime);if(isNaN(a)||a<15||a>480){alert("Duration must be between 15 and 480 minutes.");return}if(!i.customerId||isNaN(Number(i.customerId))||!Number.isInteger(Number(i.customerId))){alert("Please select a valid client from the dropdown.");return}const r=`${i.date}T${i.time}:00`,o=new Date(r),n={title:i.title,description:i.description||`Client: ${i.client}
Category: ${i.category}
Address: ${i.address}`,appointmentDate:o.toISOString(),durationMinutes:a,customerId:Number(i.customerId),address:i.address||"",category:i.category||""};i.addressMeta&&i.addressMeta.placeId&&(n.addressPlaceId=i.addressMeta.placeId,n.addressLat=i.addressMeta.lat,n.addressLng=i.addressMeta.lng,n.addressComponents=i.addressMeta.components),console.log("Appointment payload:",n),Object.keys(n).forEach(s=>{console.log(`${s}:`,n[s],"type:",typeof n[s])});try{const s=await x.create(n);console.log("Appointment created successfully:",s),p({title:"",date:"",time:"",endTime:"",client:"",customerId:"",description:"",category:"",address:"",addressMeta:null}),A(!1);const l=await x.getAll(),f=(Array.isArray(l)?l:l.appointments||[]).map(w);v(f),alert("Appointment added successfully!")}catch(s){let l="Failed to add appointment. ";s.response&&s.response.data&&s.response.data.error?(typeof s.response.data.error=="string"?l+=s.response.data.error:s.response.data.error.message?l+=s.response.data.error.message:l+=JSON.stringify(s.response.data.error),s.response.data.error.details&&(l+=`
Details:`,s.response.data.error.details.forEach(d=>{l+=`
- ${d.path}: ${d.msg} (value: ${d.value})`}))):s.message&&(l+=s.message),alert(l)}},J=(e,a)=>{const[r,o]=e.split(":").map(Number),[n,s]=a.split(":").map(Number),l=r*60+o;return n*60+s-l},b=e=>{const a=oe(e);$(e.id),p(a),W(a.client||""),A(!0)},ie=async e=>{e.preventDefault();const a=`${i.date}T${i.time}:00`,r=new Date(a),o=J(i.time,i.endTime),n={title:i.title,description:i.description,appointmentDate:r.toISOString(),durationMinutes:o,customerId:Number(i.customerId),address:i.address||"",category:i.category||""};i.addressMeta&&i.addressMeta.placeId&&(n.addressPlaceId=i.addressMeta.placeId,n.addressLat=i.addressMeta.lat,n.addressLng=i.addressMeta.lng,n.addressComponents=i.addressMeta.components);try{await x.update(C,n),p({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:"",addressMeta:null}),$(null),A(!1);const s=await x.getAll(),d=(Array.isArray(s)?s:s.appointments||[]).map(w);v(d)}catch(s){console.error("Error updating appointment:",s),alert("Failed to update appointment. Please try again.")}},[Z,O]=c.useState({open:!1,id:null}),oe=e=>{const a=e.client||(e.customer?`${e.customer.firstName||""} ${e.customer.lastName||""}`.trim():"")||"";return{title:e.title||"",date:e.date||"",time:e.time||"",endTime:e.endTime||"",client:a,customerId:e.customerId||e.customer?.id||"",description:e.description||"",category:e.category||"",address:e.address||"",addressMeta:null,id:e.id,appointmentDate:e.appointmentDate}},le=async e=>{O({open:!0,id:e})},de=async()=>{const e=Z.id;O({open:!1,id:null});try{await x.delete(e);const a=await x.getAll(),o=(Array.isArray(a)?a:a.appointments||[]).map(w);v(o)}catch(a){console.error("Error deleting appointment:",a),alert("Failed to delete appointment. Please try again.")}},P=e=>{const a=new Intl.DateTimeFormat("en-CA",{timeZone:u,year:"numeric",month:"2-digit",day:"2-digit"}).format(e);return te.filter(r=>r.date===a)},ce=()=>{const e=Number(new Intl.DateTimeFormat("en-US",{timeZone:u,year:"numeric"}).format(m)),a=Number(new Intl.DateTimeFormat("en-US",{timeZone:u,month:"numeric"}).format(m))-1,r=new Date(e,a,1),o=r.getDay();let n=new Date(r);n.setDate(n.getDate()-o);const s=[];for(let l=0;l<42;l++){const d=new Date(n);d.setDate(n.getDate()+l),s.push(d)}return s},me=()=>{const e=m.getDay(),a=new Date(m);a.setDate(m.getDate()-e);const r=[];for(let o=0;o<7;o++){const n=new Date(a);n.setDate(a.getDate()+o),r.push(n)}return r},ue=e=>{Y(e),M("daily")},Q=e=>{const a=new Date(m);switch(h){case"monthly":a.setMonth(m.getMonth()+e);break;case"weekly":a.setDate(m.getDate()+e*7);break;case"daily":a.setDate(m.getDate()+e);break}Y(a)},q=()=>{const e=[];for(let a=0;a<24;a++)for(let r=0;r<60;r+=15){const o=`${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;e.push(o)}return e};return U?t.jsx("div",{className:"calendar-container",style:{minHeight:"60vh",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("h2",{children:"Loading Calendar..."})}):N?t.jsxs("div",{className:"calendar-container",children:[t.jsxs("div",{className:"calendar-header",children:[t.jsx("h1",{className:"calendar-title",children:"Calendar Management"}),t.jsx("button",{className:"calendar-logout-btn",onClick:()=>{D.logout(),k(!1),window.location.href="/"},children:"Logout"})]}),V&&t.jsx("div",{className:`calendar-feedback ${V.type==="error"?"error":""}`,children:V.message}),t.jsxs("div",{className:"calendar-dashboard",children:[(()=>{const e=D.getCurrentUser?.();return e&&(e.role==="admin"||e.role==="staff")?t.jsxs("div",{className:"calendar-card",style:{width:"100%"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("h3",{children:"Pending Appointment Requests"}),t.jsx("button",{className:"calendar-btn-secondary",type:"button",onClick:async()=>{try{E(!0);const a=await y.getAll("?status=pending"),r=Array.isArray(a)?a:a.requests||[];g(r)}finally{E(!1)}},children:"Refresh"})]}),ne?t.jsx("div",{style:{color:"#666"},children:"Loading..."}):I.length===0?t.jsx("div",{style:{color:"#666"},children:"No pending requests."}):t.jsxs("div",{style:{display:"grid",gap:8},children:[I.slice(0,5).map(a=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderTop:"1px solid #eee"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:600},children:a.title}),t.jsxs("div",{style:{fontSize:12,color:"#666"},children:[new Date(a.requestedDate).toLocaleString("en-AU"),a.address?` â€¢ ${a.address}`:""]})]}),t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx("button",{className:"calendar-btn-secondary",type:"button",onClick:async()=>{try{await y.update(a.id,{status:"approved",createAppointment:!0});const r=await y.getAll("?status=pending"),o=Array.isArray(r)?r:r.requests||[];g(o);const n=await x.getAll(),s=Array.isArray(n)?n:n.appointments||[];v(s.map(w))}catch{alert("Failed to approve.")}},children:"Approve & Create"}),t.jsx("button",{className:"calendar-btn-secondary",type:"button",onClick:async()=>{try{await y.update(a.id,{status:"approved",createAppointment:!1});const r=await y.getAll("?status=pending"),o=Array.isArray(r)?r:r.requests||[];g(o)}catch{alert("Failed to approve.")}},children:"Approve Only"}),t.jsx("button",{className:"calendar-btn-secondary",type:"button",onClick:async()=>{try{await y.update(a.id,{status:"declined"});const r=await y.getAll("?status=pending"),o=Array.isArray(r)?r:r.requests||[];g(o)}catch{alert("Failed to decline.")}},children:"Decline"})]})]},a.id)),I.length>5&&t.jsxs("div",{style:{fontSize:12,color:"#666"},children:["+ ",I.length-5," more pending..."]})]})]}):null})(),t.jsxs("div",{className:"calendar-card",children:[t.jsx("h3",{children:"Appointment Management"}),t.jsx("p",{children:"View and manage appointments, clients, and schedules."}),t.jsx("button",{className:"calendar-btn-main",onClick:()=>{A(!B),$(null),p({title:"",date:"",time:"",endTime:"",client:"",description:"",category:"",address:"",addressMeta:null})},children:B?"Cancel":"Add New Appointment"})]})]}),B&&t.jsxs("div",{className:"calendar-section",children:[t.jsx("h2",{style:{color:"#22314a",marginBottom:"1.5rem"},children:C?"Edit Appointment":"Add New Appointment"}),t.jsxs("form",{className:"calendar-form",onSubmit:e=>{if(e.preventDefault(),!i.customerId){alert("Please select a valid client from the dropdown.");return}(C?ie:re)(e)},noValidate:!0,children:[t.jsx("input",{type:"text",placeholder:"Appointment Title",value:i.title,onChange:e=>p({...i,title:e.target.value}),required:!0,className:"calendar-input"}),t.jsxs("div",{className:"calendar-client-select",children:[t.jsx("input",{type:"text",placeholder:"Select Client",value:K||i.client,onChange:e=>{W(e.target.value),L(!0),p({...i,client:e.target.value})},onBlur:()=>{setTimeout(()=>L(!1),200)},onFocus:()=>L(!0),autoComplete:"off",required:!0,className:"calendar-input"}),se&&G.length>0&&t.jsx("div",{className:"calendar-client-dropdown",children:G.map(e=>t.jsxs("div",{className:"calendar-client-option",onClick:()=>{p({...i,client:`${e.firstName} ${e.lastName}`,customerId:e.id}),W(`${e.firstName} ${e.lastName}`),L(!1)},children:[e.firstName," ",e.lastName," ",e.company?`(${e.company})`:""]},e.id))})]}),t.jsx("input",{type:"date",value:i.date,onChange:e=>p({...i,date:e.target.value}),required:!0,className:"calendar-input"}),t.jsx(_,{label:"Start Time",value:i.time,onChange:e=>p({...i,time:e})}),t.jsx(_,{label:"End Time",value:i.endTime,onChange:e=>p({...i,endTime:e})}),t.jsxs("select",{value:i.category,onChange:e=>p({...i,category:e.target.value}),required:!0,className:"calendar-select",children:[t.jsx("option",{value:"",children:"Select a Category"}),Object.keys(ee).map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx(xe,{label:"Address/Location",value:i.address,onChange:(e,a)=>{p({...i,address:e,addressMeta:a})},placeholder:"Start typing an Australian addressâ€¦",showTip:!1}),t.jsx("textarea",{placeholder:"Description",value:i.description,onChange:e=>p({...i,description:e.target.value}),className:"calendar-textarea"}),t.jsxs("div",{className:"calendar-form-actions",children:[t.jsx("button",{className:"calendar-btn-main",type:"submit",children:C?"Update Appointment":"Add Appointment"}),t.jsx("button",{className:"calendar-btn-secondary",type:"button",onClick:()=>{A(!1),$(null)},children:"Cancel"}),C&&t.jsx("button",{className:"calendar-btn-delete",type:"button",onClick:()=>le(C),children:"Delete"})]})]})]}),t.jsxs("div",{className:"calendar-section",children:[t.jsxs("div",{className:"calendar-nav-header",children:[t.jsx("button",{onClick:()=>Q(-1),className:"calendar-nav-btn",children:"â€¹ Previous"}),t.jsxs("h3",{className:"calendar-nav-title",children:[h==="monthly"&&new Intl.DateTimeFormat("en-AU",{timeZone:u,month:"long",year:"numeric"}).format(m),h==="weekly"&&`Week of ${new Intl.DateTimeFormat("en-AU",{timeZone:u,month:"short",day:"numeric",year:"numeric"}).format(m)}`,h==="daily"&&new Intl.DateTimeFormat("en-AU",{timeZone:u,weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(m)]}),t.jsx("button",{onClick:()=>Q(1),className:"calendar-nav-btn",children:"Next â€º"}),t.jsxs("div",{className:"calendar-view-switcher",children:[t.jsx("button",{className:`calendar-view-btn${h==="monthly"?" active":""}`,onClick:()=>M("monthly"),type:"button",children:"Monthly"}),t.jsx("button",{className:`calendar-view-btn${h==="weekly"?" active":""}`,onClick:()=>M("weekly"),type:"button",children:"Weekly"}),t.jsx("button",{className:`calendar-view-btn${h==="daily"?" active":""}`,onClick:()=>M("daily"),type:"button",children:"Daily"})]})]}),h==="monthly"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"calendar-day-names",children:[t.jsx("div",{className:"calendar-day-name",children:"Monday"}),t.jsx("div",{className:"calendar-day-name",children:"Tuesday"}),t.jsx("div",{className:"calendar-day-name",children:"Wednesday"}),t.jsx("div",{className:"calendar-day-name",children:"Thursday"}),t.jsx("div",{className:"calendar-day-name",children:"Friday"}),t.jsx("div",{className:"calendar-day-name",children:"Saturday"}),t.jsx("div",{className:"calendar-day-name",children:"Sunday"})]}),t.jsx("div",{className:"calendar-monthly-grid",children:ce().map((e,a)=>{const r=P(e),o=e.getMonth()===m.getMonth(),n=e.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`calendar-day ${o?"":"calendar-day-muted"} ${n?"calendar-day-today":""}`,children:[t.jsx("div",{className:"calendar-day-date",onClick:()=>ue(e),children:e.getDate()}),r.map(s=>{const l=s.time&&s.endTime&&String(s.time).trim()!==""&&String(s.endTime).trim()!==""&&s.time!=="Invalid Date"&&s.endTime!=="Invalid Date";return console.log("Monthly view appointment:",s.id,"hasValidTime:",l,"time:",s.time,"endTime:",s.endTime),s}).map(s=>{const l=s.time&&s.endTime&&String(s.time).trim()!==""&&String(s.endTime).trim()!==""&&s.time!=="Invalid Date"&&s.endTime!=="Invalid Date",d=T(s.category);return t.jsxs("div",{className:"calendar-appointment",style:{backgroundColor:d.color,color:d.textColor},onClick:()=>{b(s)},children:[t.jsx("div",{className:"calendar-appointment-time",children:l?`${s.time} - ${s.endTime}`:"All Day"}),t.jsx("div",{className:"calendar-appointment-title",children:s.title})]},s.id)})]},a)})})]}),h==="weekly"&&t.jsxs("div",{className:"calendar-weekly-grid",children:[t.jsxs("div",{className:"calendar-time-slots",children:[t.jsx("div",{className:"calendar-time-slot-header"}),q().map((e,a)=>t.jsx("div",{className:"calendar-time-slot",children:a%4===0?e:""},e))]}),t.jsx("div",{className:"calendar-days-grid",children:me().map((e,a)=>{const r=P(e),o=e.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`calendar-day ${o?"calendar-day-today":""}`,children:[t.jsx("div",{className:"calendar-day-header",children:e.toLocaleDateString("en-US",{weekday:"short",month:"numeric",day:"numeric"})}),t.jsxs("div",{className:"calendar-day-body",children:[q().map((n,s)=>t.jsx("div",{className:"calendar-time-slot"},n)),r.filter(n=>{const s=n.time&&n.endTime&&String(n.time).trim()!==""&&String(n.endTime).trim()!==""&&n.time!=="Invalid Date"&&n.endTime!=="Invalid Date";return console.log("Weekly view appointment filter:",n.id,"hasValidTime:",s,"time:",n.time,"endTime:",n.endTime),s}).map(n=>{const s=T(n.category),[l,d]=n.time.split(":").map(Number),[f,H]=n.endTime.split(":").map(Number),S=Math.floor((l*60+d)/15),X=Math.floor((f*60+H)/15),z=S*16,pe=X*16;console.log(`Weekly view positioning - ${n.title}: ${n.time}-${n.endTime}, startSlot: ${S}, endSlot: ${X}, startPosition: ${z}px`);const he=Math.max(30,pe-z);return t.jsxs("div",{className:"calendar-appointment",style:{top:`${z}px`,height:`${he}px`,backgroundColor:s.color,color:s.textColor},onClick:()=>{b(n)},children:[t.jsxs("div",{className:"calendar-appointment-time",children:[n.time," - ",n.endTime]}),t.jsx("div",{className:"calendar-appointment-title",children:n.title})]},n.id)}),r.filter(n=>!(n.time&&n.endTime&&String(n.time).trim()!==""&&String(n.endTime).trim()!==""&&n.time!=="Invalid Date"&&n.endTime!=="Invalid Date")).map(n=>{const s=T(n.category);return t.jsx("div",{className:"calendar-appointment calendar-all-day",style:{backgroundColor:s.color,color:s.textColor,position:"relative",marginBottom:"2px",padding:"2px 4px",fontSize:"11px"},onClick:()=>{b(n)},children:t.jsx("div",{className:"calendar-appointment-title",children:n.title})},n.id)})]})]},a)})})]}),h==="daily"&&t.jsxs("div",{className:"calendar-daily-grid",children:[t.jsxs("div",{className:"calendar-time-slots",children:[t.jsx("div",{className:"calendar-time-slot-header"}),q().map((e,a)=>t.jsx("div",{className:"calendar-time-slot",title:`Slot ${a}: ${e}`,children:a%4===0?e:""},e))]}),t.jsxs("div",{className:"calendar-single-day",children:[t.jsx("div",{className:"calendar-day-header",children:m.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),t.jsxs("div",{className:"calendar-day-body",children:[q().map((e,a)=>t.jsx("div",{className:"calendar-time-slot"},e)),P(m).filter(e=>{const a=e.time&&e.endTime&&String(e.time).trim()!==""&&String(e.endTime).trim()!==""&&e.time!=="Invalid Date"&&e.endTime!=="Invalid Date";return console.log("Daily view appointment filter:",e.id,"hasTime:",a,"time:",e.time,"endTime:",e.endTime,"appointmentDate:",e.appointmentDate),a}).map(e=>{const a=T(e.category),[r,o]=e.time.split(":").map(Number),[n,s]=e.endTime.split(":").map(Number),l=Math.floor((r*60+o)/15),d=Math.floor((n*60+s)/15),f=l*16,H=d*16,S=Math.max(30,H-f);return console.log(`Daily view positioning - ${e.title}: ${e.time}-${e.endTime}, startSlot: ${l}, endSlot: ${d}, startPosition: ${f}px, height: ${S}px`),t.jsxs("div",{className:"calendar-appointment",style:{top:`${f}px`,height:`${S}px`,backgroundColor:a.color,color:a.textColor},onClick:()=>{b(e)},children:[t.jsxs("div",{className:"calendar-appointment-time",children:[e.time," - ",e.endTime]}),t.jsx("div",{className:"calendar-appointment-title",children:e.title}),t.jsx("div",{className:"calendar-appointment-category",children:e.category})]},e.id)}),t.jsx("div",{className:"calendar-all-day-section",style:{position:"absolute",top:"0",left:"0",right:"0",background:"#f8f9fa",borderBottom:"1px solid #dee2e6",padding:"4px"},children:P(m).filter(e=>!(e.time&&e.endTime&&String(e.time).trim()!==""&&String(e.endTime).trim()!==""&&e.time!=="Invalid Date"&&e.endTime!=="Invalid Date")).map(e=>{const a=T(e.category);return t.jsx("div",{className:"calendar-appointment calendar-all-day",style:{backgroundColor:a.color,color:a.textColor,marginBottom:"2px",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},onClick:()=>{b(e)},children:t.jsx("div",{className:"calendar-appointment-title",children:e.title})},e.id)})})]})]})]})]}),t.jsx(fe,{open:Z.open,title:"Delete Appointment",message:"Are you sure you want to delete this appointment? This action cannot be undone.",onConfirm:de,onCancel:()=>O({open:!1,id:null})})]}):t.jsx("div",{className:"calendar-container",children:t.jsxs("div",{className:"calendar-card",style:{maxWidth:500,margin:"3rem auto",textAlign:"center"},children:[t.jsx("h1",{className:"calendar-title",children:"ðŸ”’ Calendar Access Required"}),t.jsx("p",{style:{color:"#666",marginBottom:24},children:"Please log in to access the calendar system."}),t.jsx("a",{href:"/login",className:"calendar-btn-main",children:"Go to Login Page"})]})})};export{Ne as default};
